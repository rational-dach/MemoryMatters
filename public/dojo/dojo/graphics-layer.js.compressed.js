//>>built
require({cache:{"dojox/xml/DomParser":function(){define("dojox/xml/DomParser",["dojo/_base/kernel","dojo/_base/array"],function(f){f.getObject("xml",!0,dojox);dojox.xml.DomParser=new function(){var u,n,t;function w(){return new function(){var b={};this.nodeType=u;this.nodeName="#document";this.namespaces={};this._nsPaths={};this.childNodes=[];this.documentElement=null;this._add=function(a){"undefined"!=typeof a.id&&(b[a.id]=a)};this._remove=function(a){b[a]&&delete b[a]};this.byId=this.getElementById=
function(a){return b[a]};this.byName=this.getElementsByTagName=c;this.byNameNS=this.getElementsByTagNameNS=s;this.childrenByName=l;this.childrenByNameNS=o}}function c(b){function a(b,g,i){f.forEach(b.childNodes,function(b){b.nodeType==n&&("*"==g?i.push(b):b.nodeName==g&&i.push(b),a(b,g,i))})}var g=[];a(this,b,g);return g}function s(b,a){function g(b,a,i,v){f.forEach(b.childNodes,function(b){b.nodeType==n&&("*"==a&&b.ownerDocument._nsPaths[i]==b.namespace?v.push(b):b.localName==a&&b.ownerDocument._nsPaths[i]==
b.namespace&&v.push(b),g(b,a,i,v))})}a||(a=N);var i=[];g(this,b,a,i);return i}function l(b){var a=[];f.forEach(this.childNodes,function(g){g.nodeType==n&&("*"==b?a.push(g):g.nodeName==b&&a.push(g))});return a}function o(b,a){var g=[];f.forEach(this.childNodes,function(i){i.nodeType==n&&("*"==b&&i.ownerDocument._nsPaths[a]==i.namespace?g.push(i):i.localName==b&&i.ownerDocument._nsPaths[a]==i.namespace&&g.push(i))});return g}function k(b){return{nodeType:t,nodeName:"#text",nodeValue:b.replace(J," ").replace(Z,
">").replace($,"<").replace(K,"'").replace(O,'"').replace(P,"&")}}function m(b){for(var a=0;a<this.attributes.length;a++)if(this.attributes[a].nodeName==b)return this.attributes[a].nodeValue;return null}function q(b,a){for(var g=0;g<this.attributes.length;g++)if(this.ownerDocument._nsPaths[a]==this.attributes[g].namespace&&this.attributes[g].localName==b)return this.attributes[g].nodeValue;return null}function a(b,a){for(var g=null,i=0;i<this.attributes.length;i++)if(this.attributes[i].nodeName==
b){g=this.attributes[i].nodeValue;this.attributes[i].nodeValue=a;break}"id"==b&&(null!=g&&this.ownerDocument._remove(g),this.ownerDocument._add(this))}function i(b,a,g){for(var i=0;i<this.attributes.length;i++)if(this.ownerDocument._nsPaths[g]==this.attributes[i].namespace&&this.attributes[i].localName==b){this.attributes[i].nodeValue=a;break}}function y(){var b=this.parentNode;if(b)for(var a=0;a<b.childNodes.length;a++)if(b.childNodes[a]==this&&0<a)return b.childNodes[a-1];return null}function g(){var b=
this.parentNode;if(b)for(var a=0;a<b.childNodes.length;a++)if(b.childNodes[a]==this&&a+1<b.childNodes.length)return b.childNodes[a+1];return null}n=1;t=3;u=9;var b=/<([^>\/\s+]*)([^>]*)>([^<]*)/g,v=/([^=]*)=(("([^"]*)")|('([^']*)'))/g,E=/<!ENTITY\s+([^"]*)\s+"([^"]*)">/g,S=/<!\[CDATA\[([\u0001-\uFFFF]*?)\]\]>/g,aa=/<\!--([\u0001-\uFFFF]*?)--\>/g,C=/^\s+|\s+$/g,J=/\s+/g,Z=/\&gt;/g,$=/\&lt;/g,O=/\&quot;/g,K=/\&apos;/g,P=/\&amp;/g,N="_def_";this.parse=function(f){var t=w();if(null==f||0==f.length)return t;
if(0<f.indexOf("<!ENTITY")){var u,V=[];if(E.test(f)){for(E.lastIndex=0;null!=(u=E.exec(f));)V.push({entity:"&"+u[1].replace(C,"")+";",expression:u[2]});for(var B=0;B<V.length;B++)f=f.replace(RegExp(V[B].entity,"g"),V[B].expression)}}for(V=[];null!=(u=S.exec(f));)V.push(u[1]);for(B=0;B<V.length;B++)f=f.replace(V[B],B);for(u=[];null!=(B=aa.exec(f));)u.push(B[1]);for(B=0;B<u.length;B++)f=f.replace(u[B],B);for(var F,B=t;null!=(F=b.exec(f));)if("/"==F[2].charAt(0)&&1<F[2].replace(C,"").length){B.parentNode&&
(B=B.parentNode);var G=(F[3]||"").replace(C,"");0<G.length&&B.childNodes.push(k(G))}else if(0<F[1].length)if("?"==F[1].charAt(0))G=F[1].substr(1),F=F[2].substr(0,F[2].length-2),B.childNodes.push({nodeType:7,nodeName:G,nodeValue:F});else if("!"==F[1].charAt(0))if(0==F[1].indexOf("![CDATA[")){var I=parseInt(F[1].replace("![CDATA[","").replace("]]",""));B.childNodes.push({nodeType:4,nodeName:"#cdata-section",nodeValue:V[I]})}else"!--"==F[1].substr(0,3)&&(I=parseInt(F[1].replace("!--","").replace("--",
"")),B.childNodes.push({nodeType:8,nodeName:"#comment",nodeValue:u[I]}));else{var G=F[1].replace(C,""),D={nodeType:n,nodeName:G,localName:G,namespace:N,ownerDocument:t,attributes:[],parentNode:null,childNodes:[]};if(-1<G.indexOf(":")){var Q=G.split(":");D.namespace=Q[0];D.localName=Q[1]}D.byName=D.getElementsByTagName=c;D.byNameNS=D.getElementsByTagNameNS=s;D.childrenByName=l;D.childrenByNameNS=o;D.getAttribute=m;D.getAttributeNS=q;D.setAttribute=a;D.setAttributeNS=i;D.previous=D.previousSibling=
y;for(D.next=D.nextSibling=g;null!=(I=v.exec(F[2]));)if(0<I.length)if(G=I[1].replace(C,""),I=(I[4]||I[6]||"").replace(J," ").replace(Z,">").replace($,"<").replace(K,"'").replace(O,'"').replace(P,"&"),0==G.indexOf("xmlns"))0<G.indexOf(":")?(Q=G.split(":"),t.namespaces[Q[1]]=I,t._nsPaths[I]=Q[1]):(t.namespaces[N]=I,t._nsPaths[I]=N);else{var ga=G,Q=N;0<G.indexOf(":")&&(Q=G.split(":"),ga=Q[1],Q=Q[0]);D.attributes.push({nodeType:2,nodeName:G,localName:ga,namespace:Q,nodeValue:I});"id"==ga&&(D.id=I)}t._add(D);
B&&(B.childNodes.push(D),D.parentNode=B,"/"!=F[2].charAt(F[2].length-1)&&(B=D));G=F[3];0<G.length&&B.childNodes.push(k(G))}for(B=0;B<t.childNodes.length;B++)if(f=t.childNodes[B],f.nodeType==n){t.documentElement=f;break}return t}};return dojox.xml.DomParser})},"dojox/gfx/move":function(){define("dojox/gfx/move",["dojo/_base/lang","./Mover","./Moveable"],function(f){return f.getObject("dojox.gfx.move",!0)})},"dojox/gfx/arc":function(){define("dojox/gfx/arc",["./_base","dojo/_base/lang","./matrix"],
function(f,u,n){function t(c){var m=Math.cos(c),c=Math.sin(c),l={x:m+4/3*(1-m),y:c-4/3*m*(1-m)/c};return{s:{x:m,y:-c},c1:{x:l.x,y:-l.y},c2:l,e:{x:m,y:c}}}var w=2*Math.PI,c=Math.PI/4,s=Math.PI/8,l=c+s,o=t(s);return f.arc={unitArcAsBezier:t,curvePI4:o,arcAsBezier:function(k,m,q,a,i,y,g,b){var i=Boolean(i),y=Boolean(y),v=n._degToRad(a),a=m*m,E=q*q,f=n.multiplyPoint(n.rotate(-v),{x:(k.x-g)/2,y:(k.y-b)/2}),aa=f.x*f.x,u=f.y*f.y,a=Math.sqrt((a*E-a*u-E*aa)/(a*u+E*aa));isNaN(a)&&(a=0);a={x:a*m*f.y/q,y:-a*
q*f.x/m};i==y&&(a={x:-a.x,y:-a.y});a=n.multiplyPoint([n.translate((k.x+g)/2,(k.y+b)/2),n.rotate(v)],a);m=n.normalize([n.translate(a.x,a.y),n.rotate(v),n.scale(m,q)]);a=n.invert(m);k=n.multiplyPoint(a,k);b=n.multiplyPoint(a,g,b);g=Math.atan2(k.y,k.x);b=Math.atan2(b.y,b.x);a=g-b;y&&(a=-a);0>a?a+=w:a>w&&(a-=w);q=s;b=o;q=y?q:-q;k=[];for(i=a;0<i;i-=c)i<l&&(q=i/2,b=t(q),q=y?q:-q,i=0),f=n.normalize([m,n.rotate(g+q)]),y?(a=n.multiplyPoint(f,b.c1),v=n.multiplyPoint(f,b.c2),f=n.multiplyPoint(f,b.e)):(a=n.multiplyPoint(f,
b.c2),v=n.multiplyPoint(f,b.c1),f=n.multiplyPoint(f,b.s)),k.push([a.x,a.y,v.x,v.y,f.x,f.y]),g+=2*q;return k}}})},"dojox/gfx":function(){define("dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(f,u,n){u.switchTo(n);return u})},"dojox/gfx/gradient":function(){define("dojox/gfx/gradient",["dojo/_base/lang","./matrix","dojo/_base/Color"],function(f,u,n){function t(c,l,o,k,m,q){c=u.multiplyPoint(o,c,l);k=u.multiplyPoint(k,c);return{r:c,p:k,o:u.multiplyPoint(m,k).x/q}}function w(c,
l){return c.o-l.o}var c=f.getObject("dojox.gfx.gradient",!0);c.rescale=function(c,l,o){var k=c.length,m=o<l,q;m&&(q=l,l=o,o=q);if(!k)return[];if(o<=c[0].offset)q=[{offset:0,color:c[0].color},{offset:1,color:c[0].color}];else if(l>=c[k-1].offset)q=[{offset:0,color:c[k-1].color},{offset:1,color:c[k-1].color}];else{var a=o-l,i,y,g;q=[];0>l&&q.push({offset:0,color:new n(c[0].color)});for(g=0;g<k&&!(i=c[g],i.offset>=l);++g);g?(y=c[g-1],q.push({offset:0,color:n.blendColors(new n(y.color),new n(i.color),
(l-y.offset)/(i.offset-y.offset))})):q.push({offset:0,color:new n(i.color)});for(;g<k;++g){i=c[g];if(i.offset>=o)break;q.push({offset:(i.offset-l)/a,color:new n(i.color)})}g<k?(y=c[g-1],q.push({offset:1,color:n.blendColors(new n(y.color),new n(i.color),(o-y.offset)/(i.offset-y.offset))})):q.push({offset:1,color:new n(c[k-1].color)})}if(m){q.reverse();g=0;for(k=q.length;g<k;++g)i=q[g],i.offset=1-i.offset}return q};c.project=function(f,l,o,k){var f=f||u.identity,m=u.multiplyPoint(f,l.x1,l.y1),q=u.multiplyPoint(f,
l.x2,l.y2),a=Math.atan2(q.y-m.y,q.x-m.x),i=u.project(q.x-m.x,q.y-m.y),m=u.multiplyPoint(i,m),q=u.multiplyPoint(i,q),m=new u.Matrix2D([u.rotate(-a),{dx:-m.x,dy:-m.y}]),q=u.multiplyPoint(m,q).x,f=[t(o.x,o.y,f,i,m,q),t(k.x,k.y,f,i,m,q),t(o.x,k.y,f,i,m,q),t(k.x,o.y,f,i,m,q)].sort(w),l=c.rescale(l.colors,f[0].o,f[3].o);Math.atan2(f[3].r.y-f[0].r.y,f[3].r.x-f[0].r.x);return{type:"linear",x1:f[0].p.x,y1:f[0].p.y,x2:f[3].p.x,y2:f[3].p.y,colors:l,angle:a}};return c})},"dojox/gfx/canvas":function(){define("dojox/gfx/canvas",
"./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./_base ./shape ./path ./arc ./matrix ./decompose".split(" "),function(f,u,n,t,w,c,s,l,o,k,m,q){var a=f.canvas={},i=null,y=q.multiplyPoint,g=Math.PI,b=2*g,v=g/2,l=u.extend;t("dojox.gfx.canvas.Shape",o.Shape,{_render:function(b){b.save();this._renderTransform(b);this._renderShape(b);this._renderFill(b,true);this._renderStroke(b,true);b.restore()},_renderTransform:function(b){if("canvasTransform"in
this){var a=this.canvasTransform;b.translate(a.dx,a.dy);b.rotate(a.angle2);b.scale(a.sx,a.sy);b.rotate(a.angle1)}},_renderShape:function(){},_renderFill:function(b,a){if("canvasFill"in this){var g=this.fillStyle;if("canvasFillImage"in this){var v=g.width,c=g.height,m=this.canvasFillImage.width,l=this.canvasFillImage.height,k=Math.min(v==m?1:v/m,c==l?1:c/l),o=(v-k*m)/2,y=(c-k*l)/2;i.width=v;i.height=c;var E=i.getContext("2d");E.clearRect(0,0,v,c);E.drawImage(this.canvasFillImage,0,0,m,l,o,y,k*m,k*
l);this.canvasFill=b.createPattern(i,"repeat");delete this.canvasFillImage}b.fillStyle=this.canvasFill;if(a){g.type==="pattern"&&(g.x!==0||g.y!==0)&&b.translate(g.x,g.y);b.fill()}}else b.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(b,a){var g=this.strokeStyle;if(g){b.strokeStyle=g.color.toString();b.lineWidth=g.width;b.lineCap=g.cap;if(typeof g.join=="number"){b.lineJoin="miter";b.miterLimit=g.join}else b.lineJoin=g.join;a&&b.stroke()}else if(!a)b.strokeStyle="rgba(0,0,0,0.0)"},getEventSource:function(){return null},
connect:function(){},disconnect:function(){}});var E=function(b,a,g){var i=b.prototype[a];b.prototype[a]=g?function(){this.surface.makeDirty();i.apply(this,arguments);g.call(this);return this}:function(){this.surface.makeDirty();return i.apply(this,arguments)}};E(a.Shape,"setTransform",function(){this.matrix?this.canvasTransform=f.decompose(this.matrix):delete this.canvasTransform});E(a.Shape,"setFill",function(){var b=this.fillStyle,a;if(b){if(typeof b=="object"&&"type"in b){var g=this.surface.rawNode.getContext("2d");
switch(b.type){case "linear":case "radial":a=b.type=="linear"?g.createLinearGradient(b.x1,b.y1,b.x2,b.y2):g.createRadialGradient(b.cx,b.cy,0,b.cx,b.cy,b.r);n.forEach(b.colors,function(b){a.addColorStop(b.offset,f.normalizeColor(b.color).toString())});break;case "pattern":i||(i=document.createElement("canvas"));g=new Image;this.surface.downloadImage(g,b.src);this.canvasFillImage=g}}else a=b.toString();this.canvasFill=a}else delete this.canvasFill});E(a.Shape,"setStroke");E(a.Shape,"setShape");t("dojox.gfx.canvas.Group",
a.Shape,{constructor:function(){o.Container._init.call(this)},_render:function(b){b.save();this._renderTransform(b);for(var a=0;a<this.children.length;++a)this.children[a]._render(b);b.restore()}});t("dojox.gfx.canvas.Rect",[a.Shape,o.Rect],{_renderShape:function(b){var a=this.shape,i=Math.min(a.r,a.height/2,a.width/2),c=a.x,m=c+a.width,l=a.y,a=l+a.height,k=c+i,o=m-i,y=l+i,E=a-i;b.beginPath();b.moveTo(k,l);if(i){b.arc(o,y,i,-v,0,false);b.arc(o,E,i,0,v,false);b.arc(k,E,i,v,g,false);b.arc(k,y,i,g,g+
v,false)}else{b.lineTo(o,l);b.lineTo(m,E);b.lineTo(k,a);b.lineTo(c,y)}b.closePath()}});var S=[];(function(){var b=m.curvePI4;S.push(b.s,b.c1,b.c2,b.e);for(var a=45;a<360;a=a+45){var g=q.rotateg(a);S.push(y(g,b.c1),y(g,b.c2),y(g,b.e))}})();t("dojox.gfx.canvas.Ellipse",[a.Shape,o.Ellipse],{setShape:function(){this.inherited(arguments);var b=this.shape,a,g,i=[],v=q.normalize([q.translate(b.cx,b.cy),q.scale(b.rx,b.ry)]),b=y(v,S[0]);i.push([b.x,b.y]);for(var c=1;c<S.length;c=c+3){a=y(v,S[c]);g=y(v,S[c+
1]);b=y(v,S[c+2]);i.push([a.x,a.y,g.x,g.y,b.x,b.y])}this.canvasEllipse=i;return this},_renderShape:function(b){var a=this.canvasEllipse;b.beginPath();b.moveTo.apply(b,a[0]);for(var g=1;g<a.length;++g)b.bezierCurveTo.apply(b,a[g]);b.closePath()}});t("dojox.gfx.canvas.Circle",[a.Shape,o.Circle],{_renderShape:function(a){var g=this.shape;a.beginPath();a.arc(g.cx,g.cy,g.r,0,b,1)}});t("dojox.gfx.canvas.Line",[a.Shape,o.Line],{_renderShape:function(b){var a=this.shape;b.beginPath();b.moveTo(a.x1,a.y1);
b.lineTo(a.x2,a.y2)}});t("dojox.gfx.canvas.Polyline",[a.Shape,o.Polyline],{setShape:function(){this.inherited(arguments);var b=this.shape.points,a=b[0],g,i;this.bbox=null;this._normalizePoints();if(b.length)if(typeof a=="number")a=b;else{a=[];for(i=0;i<b.length;++i){g=b[i];a.push(g.x,g.y)}}else a=[];this.canvasPolyline=a;return this},_renderShape:function(b){var a=this.canvasPolyline;if(a.length){b.beginPath();b.moveTo(a[0],a[1]);for(var g=2;g<a.length;g=g+2)b.lineTo(a[g],a[g+1])}}});t("dojox.gfx.canvas.Image",
[a.Shape,o.Image],{setShape:function(){this.inherited(arguments);var b=new Image;this.surface.downloadImage(b,this.shape.src);this.canvasImage=b;return this},_renderShape:function(b){var a=this.shape;b.drawImage(this.canvasImage,a.x,a.y,a.width,a.height)}});t("dojox.gfx.canvas.Text",[a.Shape,o.Text],{_setFont:function(){this.fontStyle?this.canvasFont=f.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var b=this.shape,a=0,g;if(b.text&&b.text.length>0){g=this.surface.rawNode.getContext("2d");
g.save();this._renderTransform(g);this._renderFill(g,false);this._renderStroke(g,false);if(this.canvasFont)g.font=this.canvasFont;a=g.measureText(b.text).width;g.restore()}return a},_render:function(b){b.save();this._renderTransform(b);this._renderFill(b,false);this._renderStroke(b,false);this._renderShape(b);b.restore()},_renderShape:function(b){var a,g=this.shape;if(g.text&&g.text.length!=0){a=g.align==="middle"?"center":g.align;b.textAlign=a;if(this.canvasFont)b.font=this.canvasFont;this.canvasFill&&
b.fillText(g.text,g.x,g.y);if(this.strokeStyle){b.beginPath();b.strokeText(g.text,g.x,g.y);b.closePath()}}}});E(a.Text,"setFont");if(w.global.CanvasRenderingContext2D)(w=w.doc.createElement("canvas").getContext("2d"))&&typeof w.fillText!="function"&&a.Text.extend({getTextWidth:function(){return 0},_renderShape:function(){}});var aa={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",
Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};t("dojox.gfx.canvas.Path",[a.Shape,k.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];return this.inherited(arguments)},_updateWithSegment:function(b){var a=u.clone(this.last);this[aa[b.action]](this.canvasPath,b.action,b.args);this.last=a;this.inherited(arguments)},_renderShape:function(b){var a=this.canvasPath;b.beginPath();for(var g=
0;g<a.length;g=g+2)b[a[g]].apply(b,a[g+1])},_moveToA:function(b,a,g){b.push("moveTo",[g[0],g[1]]);for(a=2;a<g.length;a=a+2)b.push("lineTo",[g[a],g[a+1]]);this.last.x=g[g.length-2];this.last.y=g[g.length-1];this.lastControl={}},_moveToR:function(b,a,g){"x"in this.last?b.push("moveTo",[this.last.x=this.last.x+g[0],this.last.y=this.last.y+g[1]]):b.push("moveTo",[this.last.x=g[0],this.last.y=g[1]]);for(a=2;a<g.length;a=a+2)b.push("lineTo",[this.last.x=this.last.x+g[a],this.last.y=this.last.y+g[a+1]]);
this.lastControl={}},_lineToA:function(b,a,g){for(a=0;a<g.length;a=a+2)b.push("lineTo",[g[a],g[a+1]]);this.last.x=g[g.length-2];this.last.y=g[g.length-1];this.lastControl={}},_lineToR:function(b,a,g){for(a=0;a<g.length;a=a+2)b.push("lineTo",[this.last.x=this.last.x+g[a],this.last.y=this.last.y+g[a+1]]);this.lastControl={}},_hLineToA:function(b,a,g){for(a=0;a<g.length;++a)b.push("lineTo",[g[a],this.last.y]);this.last.x=g[g.length-1];this.lastControl={}},_hLineToR:function(b,a,g){for(a=0;a<g.length;++a)b.push("lineTo",
[this.last.x=this.last.x+g[a],this.last.y]);this.lastControl={}},_vLineToA:function(b,a,g){for(a=0;a<g.length;++a)b.push("lineTo",[this.last.x,g[a]]);this.last.y=g[g.length-1];this.lastControl={}},_vLineToR:function(b,a,g){for(a=0;a<g.length;++a)b.push("lineTo",[this.last.x,this.last.y=this.last.y+g[a]]);this.lastControl={}},_curveToA:function(b,a,g){for(a=0;a<g.length;a=a+6)b.push("bezierCurveTo",g.slice(a,a+6));this.last.x=g[g.length-2];this.last.y=g[g.length-1];this.lastControl.x=g[g.length-4];
this.lastControl.y=g[g.length-3];this.lastControl.type="C"},_curveToR:function(b,a,g){for(a=0;a<g.length;a=a+6){b.push("bezierCurveTo",[this.last.x+g[a],this.last.y+g[a+1],this.lastControl.x=this.last.x+g[a+2],this.lastControl.y=this.last.y+g[a+3],this.last.x+g[a+4],this.last.y+g[a+5]]);this.last.x=this.last.x+g[a+4];this.last.y=this.last.y+g[a+5]}this.lastControl.type="C"},_smoothCurveToA:function(b,a,g){for(a=0;a<g.length;a=a+4){var i=this.lastControl.type=="C";b.push("bezierCurveTo",[i?2*this.last.x-
this.lastControl.x:this.last.x,i?2*this.last.y-this.lastControl.y:this.last.y,g[a],g[a+1],g[a+2],g[a+3]]);this.lastControl.x=g[a];this.lastControl.y=g[a+1];this.lastControl.type="C"}this.last.x=g[g.length-2];this.last.y=g[g.length-1]},_smoothCurveToR:function(b,a,g){for(a=0;a<g.length;a=a+4){var i=this.lastControl.type=="C";b.push("bezierCurveTo",[i?2*this.last.x-this.lastControl.x:this.last.x,i?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+g[a],this.last.y+g[a+1],this.last.x+g[a+2],this.last.y+
g[a+3]]);this.lastControl.x=this.last.x+g[a];this.lastControl.y=this.last.y+g[a+1];this.lastControl.type="C";this.last.x=this.last.x+g[a+2];this.last.y=this.last.y+g[a+3]}},_qCurveToA:function(b,a,g){for(a=0;a<g.length;a=a+4)b.push("quadraticCurveTo",g.slice(a,a+4));this.last.x=g[g.length-2];this.last.y=g[g.length-1];this.lastControl.x=g[g.length-4];this.lastControl.y=g[g.length-3];this.lastControl.type="Q"},_qCurveToR:function(b,a,g){for(a=0;a<g.length;a=a+4){b.push("quadraticCurveTo",[this.lastControl.x=
this.last.x+g[a],this.lastControl.y=this.last.y+g[a+1],this.last.x+g[a+2],this.last.y+g[a+3]]);this.last.x=this.last.x+g[a+2];this.last.y=this.last.y+g[a+3]}this.lastControl.type="Q"},_qSmoothCurveToA:function(b,a,g){for(a=0;a<g.length;a=a+2){var i=this.lastControl.type=="Q";b.push("quadraticCurveTo",[this.lastControl.x=i?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=i?2*this.last.y-this.lastControl.y:this.last.y,g[a],g[a+1]]);this.lastControl.type="Q"}this.last.x=g[g.length-2];
this.last.y=g[g.length-1]},_qSmoothCurveToR:function(b,a,g){for(a=0;a<g.length;a=a+2){var i=this.lastControl.type=="Q";b.push("quadraticCurveTo",[this.lastControl.x=i?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=i?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+g[a],this.last.y+g[a+1]]);this.lastControl.type="Q";this.last.x=this.last.x+g[a];this.last.y=this.last.y+g[a+1]}},_arcTo:function(b,a,g){for(var a=a=="a",i=0;i<g.length;i=i+7){var v=g[i+5],c=g[i+6];if(a){v=v+this.last.x;
c=c+this.last.y}var l=m.arcAsBezier(this.last,g[i],g[i+1],g[i+2],g[i+3]?1:0,g[i+4]?1:0,v,c);n.forEach(l,function(a){b.push("bezierCurveTo",a)});this.last.x=v;this.last.y=c}this.lastControl={}},_closePath:function(b){b.push("closePath",[]);this.lastControl={}}});n.forEach(["moveTo","lineTo","hLineTo","vLineTo","curveTo","smoothCurveTo","qCurveTo","qSmoothCurveTo","arcTo","closePath"],function(b){E(a.Path,b)});t("dojox.gfx.canvas.TextPath",[a.Shape,k.TextPath],{_renderShape:function(){},_setText:function(){},
_setFont:function(){}});t("dojox.gfx.canvas.Surface",o.Surface,{constructor:function(){o.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},setDimensions:function(b,a){this.width=f.normalizedLength(b);this.height=f.normalizedLength(a);if(!this.rawNode)return this;var g=false;if(this.rawNode.width!=this.width){this.rawNode.width=this.width;g=true}if(this.rawNode.height!=this.height){this.rawNode.height=this.height;g=true}g&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?
{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(){if(!this.pendingImageCount){var b=this.rawNode.getContext("2d");b.save();b.clearRect(0,0,this.rawNode.width,this.rawNode.height);for(var a=0;a<this.children.length;++a)this.children[a]._render(b);b.restore();if("pendingRender"in this){clearTimeout(this.pendingRender);delete this.pendingRender}}},makeDirty:function(){if(!this.pendingImagesCount&&!("pendingRender"in this))this.pendingRender=setTimeout(u.hitch(this,this._render),
0)},downloadImage:function(b,a){var g=u.hitch(this,this.onImageLoad);if(!this.pendingImageCount++&&"pendingRender"in this){clearTimeout(this.pendingRender);delete this.pendingRender}b.onload=g;b.onerror=g;b.onabort=g;b.src=a},onImageLoad:function(){--this.pendingImageCount||this._render()},getEventSource:function(){return null},connect:function(){},disconnect:function(){}});a.createSurface=function(b,g,i){if(!g&&!i)var v=c.position(b),g=g||v.w,i=i||v.h;typeof g=="number"&&(g=g+"px");typeof i=="number"&&
(i=i+"px");var v=new a.Surface,b=s.byId(b),m=b.ownerDocument.createElement("canvas");m.width=f.normalizedLength(g);m.height=f.normalizedLength(i);b.appendChild(m);v.rawNode=m;v._parent=b;return v.surface=v};var C=o.Container,t={add:function(b){this.surface.makeDirty();return C.add.apply(this,arguments)},remove:function(b,a){this.surface.makeDirty();return C.remove.apply(this,arguments)},clear:function(){this.surface.makeDirty();return C.clear.apply(this,arguments)},_moveChildToFront:function(b){this.surface.makeDirty();
return C._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(b){this.surface.makeDirty();return C._moveChildToBack.apply(this,arguments)}},k={createObject:function(b,a){var g=new b;g.surface=this.surface;g.setShape(a);this.add(g);return g}};l(a.Group,t);l(a.Group,o.Creator);l(a.Group,k);l(a.Surface,t);l(a.Surface,o.Creator);l(a.Surface,k);a.fixTarget=function(){return true};return a})},"dojox/gfx/utils":function(){define("dojox/gfx/utils","dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(f,u,n,t,w,c,s,l,o,k,m){var q=n.utils={};u.mixin(q,{forEach:function(a,i,m){m=m||c.global;i.call(m,a);(a instanceof n.Surface||a instanceof n.Group)&&w.forEach(a.children,function(a){q.forEach(a,i,m)})},serialize:function(a){var i={},c;if((c=a instanceof n.Surface)||a instanceof n.Group){i.children=w.map(a.children,q.serialize);if(c)return i.children}else i.shape=a.getShape();if(a.getTransform)if(c=a.getTransform())i.transform=c;if(a.getStroke)if(c=a.getStroke())i.stroke=c;if(a.getFill)if(c=
a.getFill())i.fill=c;if(a.getFont)if(c=a.getFont())i.font=c;return i},toJson:function(a,i){return s.toJson(q.serialize(a),i)},deserialize:function(a,i){if(i instanceof Array)return w.map(i,u.hitch(null,q.deserialize,a));var c="shape"in i?a.createShape(i.shape):a.createGroup();"transform"in i&&c.setTransform(i.transform);"stroke"in i&&c.setStroke(i.stroke);"fill"in i&&c.setFill(i.fill);"font"in i&&c.setFont(i.font);"children"in i&&w.forEach(i.children,u.hitch(null,q.deserialize,c));return c},fromJson:function(a,
i){return q.deserialize(a,s.fromJson(i))},toSvg:function(a){var i=new l;if(n.renderer==="svg")try{var m=q._cleanSvg(q._innerXML(a.rawNode));i.callback(m)}catch(g){i.errback(g)}else{q._initSvgSerializerDeferred||q._initSvgSerializer();var b=q.toJson(a),m=function(){try{var g=a.getDimensions(),m=g.width,l=g.height,k=q._gfxSvgProxy.document.createElement("div");q._gfxSvgProxy.document.body.appendChild(k);c.withDoc(q._gfxSvgProxy.document,function(){t.style(k,"width",m);t.style(k,"height",l)},this);q._gfxSvgProxy[dojox._scopeName].gfx.createSurface(k,
m,l).whenLoaded(null,function(a){try{q._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(a,b);var g=q._cleanSvg(k.innerHTML);a.clear();a.destroy();q._gfxSvgProxy.document.body.removeChild(k);i.callback(g)}catch(v){i.errback(v)}})}catch(o){i.errback(o)}};q._initSvgSerializerDeferred.fired>0?m():q._initSvgSerializerDeferred.addCallback(m)}return i},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){q._initSvgSerializerDeferred.callback(true)},_initSvgSerializer:function(){if(!q._initSvgSerializerDeferred){q._initSvgSerializerDeferred=
new l;var a=c.doc.createElement("iframe");t.style(a,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var i;o("ie")?a.onreadystatechange=function(){if(a.contentWindow.document.readyState=="complete"){a.onreadystatechange=function(){};i=setInterval(function(){if(a.contentWindow[f.scopeMap.dojo[1]._scopeName]&&a.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx&&a.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx.utils){clearInterval(i);a.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
a.contentWindow;a.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized()}},50)}}:a.onload=function(){a.onload=function(){};i=setInterval(function(){if(a.contentWindow[f.scopeMap.dojo[1]._scopeName]&&a.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx&&a.contentWindow[f.scopeMap.dojox[1]._scopeName].gfx.utils){clearInterval(i);a.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=a.contentWindow;a.contentWindow.parent[f.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized()}},
50)};var y=m.dojoxGfxSvgProxyFrameUrl||k.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");a.setAttribute("src",y.toString());c.body().appendChild(a)}},_innerXML:function(a){return a.innerXML?a.innerXML:a.xml?a.xml:typeof XMLSerializer!="undefined"?(new XMLSerializer).serializeToString(a):null},_cleanSvg:function(a){if(a){if(a.indexOf('xmlns="http://www.w3.org/2000/svg"')==-1){a=a.substring(4,a.length);a='<svg xmlns="http://www.w3.org/2000/svg"'+a}if(a.indexOf('xmlns:xlink="http://www.w3.org/1999/xlink"')==
-1){a=a.substring(4,a.length);a='<svg xmlns:xlink="http://www.w3.org/1999/xlink"'+a}a.indexOf("xlink:href")===-1&&(a=a.replace(/href\s*=/g,"xlink:href="));a=a.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,"");a=a.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,"");a=a.replace(/[=]([^"']+?)(\s|>)/g,'="$1"$2')}return a}});return q})},"dojox/gfx/fx":function(){define("dojox/gfx/fx","dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect".split(" "),function(f,u,
n,t,w,c,s){function l(b,a){this.start=b;this.end=a}function o(b,a,g){this.start=b;this.end=a;this.units=g}function k(b,a){this.start=b;this.end=a;this.temp=new t}function m(b){this.values=b;this.length=b.length}function q(b,a){this.values=b;this.def=a?a:{}}function a(b,a){this.stack=b;this.original=a}function i(b,a,g,i){if(b.values)return new m(b.values);var c,l;l=b.start?u.normalizeColor(b.start):c=a?g?a[g]:a:i;if(b.end)b=u.normalizeColor(b.end);else{c||(c=a?g?a[g]:a:i);b=c}return new k(l,b)}var y=
u.fx={};l.prototype.getValue=function(b){return(this.end-this.start)*b+this.start};o.prototype.getValue=function(b){return(this.end-this.start)*b+this.start+this.units};k.prototype.getValue=function(b){return t.blendColors(this.start,this.end,b,this.temp)};m.prototype.getValue=function(b){return this.values[Math.min(Math.floor(b*this.length),this.length-1)]};q.prototype.getValue=function(b){var a=f.clone(this.def),g;for(g in this.values)a[g]=this.values[g].getValue(b);return a};a.prototype.getValue=
function(b){var a=[];w.forEach(this.stack,function(g){if(g instanceof n.Matrix2D)a.push(g);else if(g.name=="original"&&this.original)a.push(this.original);else if(g.name in n){var i=n[g.name];if(typeof i!="function")a.push(i);else{var c=w.map(g.start,function(a,i){return(g.end[i]-a)*b+a}),i=i.apply(n,c);i instanceof n.Matrix2D&&a.push(i)}}},this);return a};var g=new t(0,0,0,0);y.animateStroke=function(b){if(!b.easing)b.easing=c._defaultEasing;var a=new c.Animation(b),k=b.shape,o;s.connect(a,"beforeBegin",
a,function(){o=k.getStroke();var a=b.color,c={},v;if(a)c.color=i(a,o,"color",g);if((a=b.style)&&a.values)c.style=new m(a.values);if(a=b.width){var f=a;if(f.values)v=new m(f.values);else{a=f.start?f.start:v=o?o.width:1;f.end?v=f.end:typeof v!="number"&&(v=o?o.width:1);v=new l(a,v)}c.width=v}if((a=b.cap)&&a.values)c.cap=new m(a.values);if(a=b.join)if(a.values)c.join=new m(a.values);else{v=a.start?a.start:o&&o.join||0;a=a.end?a.end:o&&o.join||0;if(typeof v=="number"&&typeof a=="number")c.join=new l(v,
a)}this.curve=new q(c,o)});s.connect(a,"onAnimate",k,"setStroke");return a};y.animateFill=function(b){if(!b.easing)b.easing=c._defaultEasing;var a=new c.Animation(b),m=b.shape,l;s.connect(a,"beforeBegin",a,function(){l=m.getFill();var a=b.color;if(a)this.curve=i(a,l,"",g)});s.connect(a,"onAnimate",m,"setFill");return a};y.animateFont=function(b){if(!b.easing)b.easing=c._defaultEasing;var a=new c.Animation(b),g=b.shape,i;s.connect(a,"beforeBegin",a,function(){i=g.getFont();var a=b.style,c={},v,l;if(a&&
a.values)c.style=new m(a.values);if((a=b.variant)&&a.values)c.variant=new m(a.values);if((a=b.weight)&&a.values)c.weight=new m(a.values);if((a=b.family)&&a.values)c.family=new m(a.values);if((a=b.size)&&a.units){v=parseFloat(a.start?a.start:g.font&&g.font.size||"0");l=parseFloat(a.end?a.end:g.font&&g.font.size||"0");c.size=new o(v,l,a.units)}this.curve=new q(c,i)});s.connect(a,"onAnimate",g,"setFont");return a};y.animateTransform=function(b){if(!b.easing)b.easing=c._defaultEasing;var g=new c.Animation(b),
i=b.shape,m;s.connect(g,"beforeBegin",g,function(){m=i.getTransform();this.curve=new a(b.transform,m)});s.connect(g,"onAnimate",i,"setTransform");return g};return y})},"dojox/string/BidiEngine":function(){define("dojox/string/BidiEngine",["dojo/_base/lang","dojo/_base/declare"],function(f,u){var n,t,w,c,s,l,o,k,m,q;function a(d,e,h,v){void 0==e&&(e=n);void 0==h&&(h=t);void 0==v&&(v=w);if(e==h)return d;var m,k=e.substring(0,1),o=e.substring(1,4),f=h.substring(0,1),q=h.substring(1,4);"C"==o.charAt(0)&&
(m=i(d),o="ltr"==m||"rtl"==m?m.toUpperCase():"L"==e.charAt(2)?"LTR":"RTL",e=k+o);if("C"==q.charAt(0)){m=i(d);if("rtl"==m)q="RTL";else if("ltr"==m){a:{h=d;m=null;for(q=h.length-1;0<=q;q--){m=g(h.charAt(q));if(m==ba||m==ea){m="rtl";break a}if(m==ha){m="ltr";break a}if(m==ca)break}m=""}q=m.toUpperCase()}else q="L"==h.charAt(2)?"LTR":"RTL";h=f+q}if(e==h)return d;c=e;s=v;if("L"==k&&"VLTR"==h){if("LTR"==o)return l=P,y(d);if("RTL"==o)return l=N,y(d)}if("V"==k&&"V"==f)return b(d);if("L"==k&&"VRTL"==h)return l=
"LTR"==o?P:N,d=y(d),b(d);if("VLTR"==e&&"LLTR"==h)return l=P,y(d);if("V"==k&&"L"==f&&o!=q)return d=b(d),"RTL"==o?a(d,"LLTR","VLTR",v):a(d,"LRTL","VRTL",v);if("VRTL"==e&&"LRTL"==h)return a(d,"LRTL","VRTL",v);if("L"==k&&"L"==f)return e=s,s=e.substr(0,1)+"N","RTL"==o?(l=N,d=y(d),s="N"+e.substr(1,2),l=P,d=y(d)):(l=P,d=y(d),s="N"+e.substr(1,2),d=a(d,"VLTR","LRTL",s)),d}function i(a){for(var b=null,g=b=null,d=0;d<a.length;d++){b=a.charAt(d).charCodeAt(0);g=ja[b>>8];b=g<R?g:ka[g-R][b&255];if(b==ba||b==ea)return"rtl";
if(b==ha)return"ltr";if(b==ca)break}return""}function y(a){var a=a.split(""),b=[],d=a.length,e=l?Ma:Na,h=null,i=null,h=null,i=0,c=null,c=null,v=-1,f=c=null,y=[],n=[];o=l;q=m=k=!1;for(c=0;c<d;c++)y[c]=g(a[c]);for(f=0;f<d;f++){h=i;n[f]=i=aa(a,y,n,f);i=e[h][i];c=i&240;i&=15;b[f]=h=e[i][O];if(0<c){if(16==c)for(c=v;c<f;c++)b[c]=1;v=-1}if(c=e[i][K])-1==v&&(v=f);else if(-1<v){for(c=v;c<f;c++)b[c]=h;v=-1}y[f]==ca&&(b[f]=0);o|=h}if(q)for(c=0;c<d;c++)if(y[c]==la){b[c]=l;for(e=c-1;0<=e;e--)if(y[e]==ma)b[e]=
l;else break}if(!(0==o||s.substr(0,1)==s.substr(1,2)))for(d=0;d<a.length;d++)if(1==b[d]){y=a;e=d;b:{v=a[d];f=void 0;n=0;for(h=X.length-1;n<=h;)if(f=Math.floor((n+h)/2),v<X[f][0])h=f-1;else if(v>X[f][0])n=f+1;else{v=X[f][1];break b}}y[e]=v}S(2,a,b);S(1,a,b);return a.join("")}function g(a){var a=a.charCodeAt(0),b=ja[a>>8];return b<R?b:ka[b-R][a&255]}function b(a){a=a.split("");a.reverse();return a.join("")}function v(a){for(var b=0;b<pa.length;b++)if(a>=pa[b]&&a<=Oa[b])return!0;return!1}function E(a,
b,g,d){for(;b*g<d&&J(a[b]);)b+=g;return b*g<d&&v(a[b])?!0:!1}function S(a,b,g){if(!(o<a))if(1==a&&l==N&&!m)b.reverse();else for(var d=b.length,e=0,h,i,c;e<d;){if(g[e]>=a){for(h=e+1;h<d&&g[h]>=a;)h++;for(i=h-1;e<i;e++,i--)c=b[e],b[e]=b[i],b[i]=c;e=h}e++}}function aa(a,b,g,d){var e=b[d],h,i;switch(e){case ha:case ba:k=!1;case W:case fa:return e;case T:return k?fa:T;case ea:return k=!0,ba;case ma:return W;case qa:if(1>d||d+1>=b.length||(h=g[d-1])!=T&&h!=fa||(i=b[d+1])!=T&&i!=fa)return W;k&&(i=fa);return i==
h?i:W;case ra:return h=0<d?g[d-1]:ca,h==T&&d+1<b.length&&b[d+1]==T?T:W;case na:if(0<d&&g[d-1]==T)return T;if(k)return W;h=d+1;for(e=b.length;h<e&&b[h]==na;)h++;return h<e&&b[h]==T?T:W;case oa:if("VLTR"==c){e=b.length;for(h=d+1;h<e&&b[h]==oa;)h++;if(h<e&&(a=a[d],h=b[h],(1425<=a&&2303>=a||64286==a)&&(h==ba||h==ea)))return ba}return 1>d||b[d-1]==ca?W:g[d-1];case ca:return lastArabic=!1,m=!0,l;case la:return q=!0,W;case sa:case ta:case ua:case va:case wa:lastArabic=!1;case xa:return W}}function C(b,a){for(var g=
0;g<B.length;g++)if(b==B[g])return a[g];return b}function J(b){return"\u064b"<=b&&"\u0655">=b?!0:!1}function Z(b){if("L"==b)return"LTR";if("R"==b)return"RTL";if("C"==b)return"CLR";if("D"==b)return"CRL"}function $(b,a){for(var g=0;g<Y.length;g++)if(b==Y[g])return a[g];return b}f.getObject("string",!0,dojox);u("dojox.string.BidiEngine",null,{bidiTransform:function(b,g,d){if(!b)return"";if(!g&&!d)return b;var e=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/;if(!e.test(g)||!e.test(d))throw Error("dojox.string.BidiEngine: the bidi layout string is wrong!");
if(g==d)return b;var e=Z(g.charAt(1)),h=Z(d.charAt(1)),i="I"==g.charAt(0)?"L":g.charAt(0),c="I"==d.charAt(0)?"L":d.charAt(0),m=i+e,l=c+h,k=g.charAt(2)+d.charAt(2);m&&(n=m);l&&(t=l);k&&(w=k);e=a(b,i+e,c+h,g.charAt(2)+d.charAt(2));b=!1;if("R"==d.charAt(1))b=!0;else if("C"==d.charAt(1)||"D"==d.charAt(1))b=this.checkContextual(e);if(g.charAt(3)==d.charAt(3))return e;if("S"==d.charAt(3)){d=e;g=!0;if(0==d.length)g=void 0;else{void 0==b&&(b=!0);void 0==g&&(g=!0);d=new String(d);d=d.split("");c=0;e=1;h=d.length;
b||(c=d.length-1,e=-1,h=1);m=0;b=[];for(i=0;c*e<h;c+=e)if(v(d[c])||J(d[c])){if(l="\u0644"==d[c])b:{for(var k=d,o=c+e,f=e,q=h;o*f<q&&J(k[o]);)o+=f;l=" ";if(o*f<q){l=k[o];for(k=0;k<Y.length;k++)if(Y[k]==l){l=!0;break b}}l=!1}if(l){d[c]=0==m?$(d[c+e],La):$(d[c+e],V);c+=e;m=d;l=c;k=e;for(o=h;l*k<o&&J(m[l]);)l+=k;l*k<o&&(m[l]=" ");g&&(b[i]=c,i++);m=0}else{l=d[c];k=d;o=c;if(1==m)if(E(d,c+e,e,h))b:{f=d[c];for(q=0;q<B.length;q++)if(f==B[q]){f=I[q];break b}}else f=C(d[c],G);else f=!0==E(d,c+e,e,h)?C(d[c],
D):C(d[c],F);k[o]=f;J(l)||(m=1);b:{for(k=0;k<Q.length;k++)if(Q[k]==l){l=!0;break b}l=!1}!0==l&&(m=0)}}else m=0;e="";for(idx=0;idx<d.length;idx++){if(h=g){b:{for(h=0;h<b.length;h++)if(b[h]==idx)break b;h=-1}h=-1<h}h||(e+=d[idx])}g=e}return g}if("N"==d.charAt(3)){g=b;i=!0;if(0==e.length)g=void 0;else{void 0==i&&(i=!0);void 0==g&&(g=!0);e=new String(e);d="";h=[];b="";if(i)for(h=0;h<e.length;h++){if(" "==e.charAt(h))if(g){if(0<h&&"\ufef5"<=e.charAt(h-1)&&"\ufefc">=e.charAt(h-1))continue}else if(h+1<e.length&&
"\ufef5"<=e.charAt(h+1)&&"\ufefc">=e.charAt(h+1))continue;b+=e.charAt(h)}else b=new String(e);h=b.split("");for(e=0;e<b.length;e++)"\ufe70"<=h[e]&&"\ufeff">h[e]?(i=b.charCodeAt(e),"\ufef5"<=h[e]&&"\ufefc">=h[e]?g?(d+="\u0644",d+=Y[parseInt((i-65269)/2)]):(d+=Y[parseInt((i-65269)/2)],d+="\u0644"):d+=ga[i-65136]):d+=h[e];g=d}return g}},checkContextual:function(b){b=i(b);"ltr"!=b&&"rtl"!=b&&(b=document.dir.toLowerCase(),"ltr"!=b&&"rtl"!=b&&(b="ltr"));return b},hasBidiChar:function(b){for(var a=null,
g=a=null,d=0;d<b.length;d++){a=b.charAt(d).charCodeAt(0);g=ja[a>>8];a=g<R?g:ka[g-R][a&255];if(a==ba||a==ea)return!0;if(a==ca)break}return!1}});l=0;n="LLTR";w="YN";c="LLTR";s="YN";o=0;k=!1;q=m=t=void 0;var O=5,K=6,P=0,N=1,X=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],
["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],Y=["\u0622","\u0623","\u0625","\u0627"],La=["\ufef5","\ufef7","\ufef9","\ufefb"],V=["\ufef6","\ufef8","\ufefa","\ufefc"],B="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624\u064b\u064c\u064d\u064e\u064f\u0650\u0651\u0652\u0621".split(""),
F="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80".split(""),G="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80".split(""),
I="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80".split(""),D="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80".split(""),
Q="\u0621\u0627\u062f\u0630\u0631\u0632\u0648\u0622\u0629\u0626\u0624\u0625\u0675\u0623".split(""),ga="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
pa=["\u0621","\u0641"],Oa=["\u063a","\u064a"],Na=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ma=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ha=0,ba=1,T=2,fa=3,W=4,ca=5,la=6,ea=7,ma=8,qa=9,ra=10,na=11,oa=12,sa=13,ta=14,wa=15,ua=16,va=17,xa=18,R=100,ya=R+0,za=R+1,Aa=R+2,Ba=R+3,Ca=R+4,Da=R+5,Ea=R+6,Fa=R+7,h=ha,r=ba,A=T,H=fa,d=W,da=ca,ia=la,e=ea,L=ma,M=qa,U=ra,z=na,p=oa,Ga=sa,Ha=ta,Ia=wa,Ja=ua,Ka=va,x=xa,ja=[ya,h,h,h,h,za,
Aa,Ba,r,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,Ca,d,d,d,h,d,h,d,h,d,d,d,h,h,d,d,h,h,h,h,h,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,h,h,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,h,h,d,d,h,h,d,d,h,h,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,h,h,h,Da,e,e,Ea,
Fa];delete ya;delete za;delete Aa;delete Ba;delete Ca;delete Da;delete Ea;delete Fa;var ka=[[x,x,x,x,x,x,x,x,x,ia,da,ia,L,da,x,x,x,x,x,x,x,x,x,x,x,x,x,x,da,da,da,ia,L,d,d,z,z,z,d,d,d,d,d,U,M,U,M,M,A,A,A,A,A,A,A,A,A,A,M,d,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,d,x,x,x,x,x,x,da,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,M,d,z,z,z,z,d,d,d,d,h,d,d,x,d,d,z,z,A,A,d,h,d,d,d,A,h,d,d,d,d,d,h,h,h,h,h,h,h,h,
h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,h,h,h,h,h,h,h,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,d,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,h,h,h,h,h,h,h,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,h,d,d,d,d,d,d,d,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,r,p,r,p,
p,r,p,p,r,p,d,d,d,d,d,d,d,d,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,d,d,d,d,d,r,r,r,r,r,d,d,d,d,d,d,d,d,d,d,d],[H,H,H,H,d,d,d,d,e,z,z,e,M,e,d,d,p,p,p,p,p,p,p,p,p,p,p,e,d,d,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,H,H,H,H,H,H,H,H,H,H,z,H,H,e,e,e,p,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p,p,p,p,p,p,p,H,d,p,p,p,p,p,p,e,e,p,p,d,p,p,p,p,e,e,A,A,A,A,A,A,A,A,A,A,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,d,e,e,p,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,d,d,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p,p,p,p,p,p,p,p,p,p,p,e,d,d,d,d,
d,d,d,d,d,d,d,d,d,d,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,p,p,p,p,p,p,p,p,p,r,r,d,d,d,d,r,d,d,d,d,d],[L,L,L,L,L,L,L,L,L,L,L,x,x,x,h,r,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,L,da,Ga,Ha,Ia,Ja,Ka,M,z,z,z,z,z,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,M,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,L,x,x,x,x,x,d,d,d,d,d,x,x,x,x,x,x,A,h,d,d,A,A,A,A,A,A,U,U,d,d,d,h,A,A,A,A,A,A,A,A,A,A,U,U,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,z,z,z,z,z,z,z,z,z,z,z,z,z,
z,z,z,z,z,z,z,z,z,z,z,z,z,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d],[h,h,h,h,h,h,h,d,d,d,d,d,d,d,d,d,d,d,d,h,h,h,h,h,d,d,d,d,d,r,p,r,r,r,r,r,r,r,r,r,r,U,r,r,r,r,r,r,r,r,r,r,r,r,r,d,r,r,r,r,r,d,r,d,r,r,d,r,r,d,r,r,r,r,r,r,r,r,r,r,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,p,p,p,p,p,p,p,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,M,d,M,d,d,M,d,d,d,d,d,d,d,d,d,z,d,d,U,U,d,d,d,d,d,z,z,d,d,d,d,d,e,e,e,e,e,d,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,
e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,d,d,x],[d,d,d,z,z,z,d,d,d,d,d,U,M,U,M,M,A,A,A,A,A,A,A,A,A,A,M,d,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,d,d,d,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,
h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,h,h,h,h,h,h,d,d,h,h,h,h,h,h,d,d,h,h,h,h,h,h,d,d,h,h,h,d,d,d,z,z,d,d,d,z,z,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d]];delete h;delete r;delete A;delete H;delete d;delete da;delete ia;delete e;delete L;delete M;delete U;delete z;delete p;delete Ga;delete Ha;delete Ia;delete Ja;delete Ka;delete x;return dojox.string.BidiEngine})},"dojox/gfx/svg":function(){define("dojox/gfx/svg","dojo/_base/lang dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/_base/Color ./_base ./shape ./path".split(" "),
function(f,u,n,t,w,c,s,l,o,k){function m(b,a){return u.doc.createElementNS?u.doc.createElementNS(b,a):u.doc.createElement(a)}function q(b){return a.useSvgWeb?u.doc.createTextNode(b,true):u.doc.createTextNode(b)}var a=l.svg={};a.useSvgWeb=typeof window.svgweb!="undefined";var i=navigator.userAgent.toLowerCase(),y=i.search("iphone")>-1||i.search("ipad")>-1||i.search("ipod")>-1;a.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};a.getRef=function(b){return!b||b=="none"?null:
b.match(/^url\(#.+\)$/)?n.byId(b.slice(5,-1)):b.match(/^#dojoUnique\d+$/)?n.byId(b.slice(1)):null};a.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};t("dojox.gfx.svg.Shape",o.Shape,{setFill:function(b){if(!b){this.fillStyle=null;this.rawNode.setAttribute("fill","none");this.rawNode.setAttribute("fill-opacity",0);return this}var a,g=function(b){this.setAttribute(b,
a[b].toFixed(8))};if(typeof b=="object"&&"type"in b){switch(b.type){case "linear":a=l.makeParameters(l.defaultLinearGradient,b);b=this._setFillObject(a,"linearGradient");w.forEach(["x1","y1","x2","y2"],g,b);break;case "radial":a=l.makeParameters(l.defaultRadialGradient,b);b=this._setFillObject(a,"radialGradient");w.forEach(["cx","cy","r"],g,b);break;case "pattern":a=l.makeParameters(l.defaultPattern,b);b=this._setFillObject(a,"pattern");w.forEach(["x","y","width","height"],g,b)}this.fillStyle=a;return this}this.fillStyle=
a=l.normalizeColor(b);this.rawNode.setAttribute("fill",a.toCss());this.rawNode.setAttribute("fill-opacity",a.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(b){var g=this.rawNode;if(!b){this.strokeStyle=null;g.setAttribute("stroke","none");g.setAttribute("stroke-opacity",0);return this}if(typeof b=="string"||f.isArray(b)||b instanceof s)b={color:b};b=this.strokeStyle=l.makeParameters(l.defaultStroke,b);b.color=l.normalizeColor(b.color);if(b){g.setAttribute("stroke",
b.color.toCss());g.setAttribute("stroke-opacity",b.color.a);g.setAttribute("stroke-width",b.width);g.setAttribute("stroke-linecap",b.cap);if(typeof b.join=="number"){g.setAttribute("stroke-linejoin","miter");g.setAttribute("stroke-miterlimit",b.join)}else g.setAttribute("stroke-linejoin",b.join);var i=b.style.toLowerCase();i in a.dasharray&&(i=a.dasharray[i]);if(i instanceof Array){for(var i=f._toArray(i),c=0;c<i.length;++c)i[c]=i[c]*b.width;if(b.cap!="butt"){for(c=0;c<i.length;c=c+2){i[c]=i[c]-b.width;
i[c]<1&&(i[c]=1)}for(c=1;c<i.length;c=c+2)i[c]=i[c]+b.width}i=i.join(",")}g.setAttribute("stroke-dasharray",i);g.setAttribute("dojoGfxStrokeStyle",b.style)}return this},_getParentSurface:function(){for(var b=this.parent;b&&!(b instanceof l.Surface);b=b.parent);return b},_setFillObject:function(b,g){var i=a.xmlns.svg;this.fillStyle=b;var c=this._getParentSurface().defNode,k=this.rawNode.getAttribute("fill");if(k=a.getRef(k))if(k.tagName.toLowerCase()!=g.toLowerCase()){var o=k.id;k.parentNode.removeChild(k);
k=m(i,g);k.setAttribute("id",o);c.appendChild(k)}else for(;k.childNodes.length;)k.removeChild(k.lastChild);else{k=m(i,g);k.setAttribute("id",l._base._getUniqueId());c.appendChild(k)}if(g=="pattern"){k.setAttribute("patternUnits","userSpaceOnUse");i=m(i,"image");i.setAttribute("x",0);i.setAttribute("y",0);i.setAttribute("width",b.width.toFixed(8));i.setAttribute("height",b.height.toFixed(8));i.setAttributeNS(a.xmlns.xlink,"xlink:href",b.src);k.appendChild(i)}else{k.setAttribute("gradientUnits","userSpaceOnUse");
for(c=0;c<b.colors.length;++c){var o=b.colors[c],f=m(i,"stop"),q=o.color=l.normalizeColor(o.color);f.setAttribute("offset",o.offset.toFixed(8));f.setAttribute("stop-color",q.toCss());f.setAttribute("stop-opacity",q.a);k.appendChild(f)}}this.rawNode.setAttribute("fill","url(#"+k.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return k},_applyTransform:function(){if(this.matrix){var b=this.matrix;this.rawNode.setAttribute("transform",
"matrix("+b.xx.toFixed(8)+","+b.yx.toFixed(8)+","+b.xy.toFixed(8)+","+b.yy.toFixed(8)+","+b.dx.toFixed(8)+","+b.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(b){b=this.rawNode=b;this.shape.type!="image"&&b.setAttribute("fill","none");b.setAttribute("fill-opacity",0);b.setAttribute("stroke","none");b.setAttribute("stroke-opacity",0);b.setAttribute("stroke-width",1);b.setAttribute("stroke-linecap","butt");b.setAttribute("stroke-linejoin","miter");
b.setAttribute("stroke-miterlimit",4);b.__gfxObject__=this.getUID()},setShape:function(b){this.shape=l.makeParameters(this.shape,b);for(var a in this.shape)a!="type"&&this.rawNode.setAttribute(a,this.shape[a]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this}});t("dojox.gfx.svg.Group",a.Shape,{constructor:function(){o.Container._init.call(this)},
setRawNode:function(b){this.rawNode=b;this.rawNode.__gfxObject__=this.getUID()}});a.Group.nodeType="g";t("dojox.gfx.svg.Rect",[a.Shape,o.Rect],{setShape:function(b){this.shape=l.makeParameters(this.shape,b);this.bbox=null;for(var a in this.shape)a!="type"&&a!="r"&&this.rawNode.setAttribute(a,this.shape[a]);if(this.shape.r!=null){this.rawNode.setAttribute("ry",this.shape.r);this.rawNode.setAttribute("rx",this.shape.r)}return this}});a.Rect.nodeType="rect";t("dojox.gfx.svg.Ellipse",[a.Shape,o.Ellipse],
{});a.Ellipse.nodeType="ellipse";t("dojox.gfx.svg.Circle",[a.Shape,o.Circle],{});a.Circle.nodeType="circle";t("dojox.gfx.svg.Line",[a.Shape,o.Line],{});a.Line.nodeType="line";t("dojox.gfx.svg.Polyline",[a.Shape,o.Polyline],{setShape:function(b,a){if(b&&b instanceof Array){this.shape=l.makeParameters(this.shape,{points:b});a&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])}else this.shape=l.makeParameters(this.shape,b);this.bbox=null;this._normalizePoints();for(var g=[],i=this.shape.points,
c=0;c<i.length;++c)g.push(i[c].x.toFixed(8),i[c].y.toFixed(8));this.rawNode.setAttribute("points",g.join(" "));return this}});a.Polyline.nodeType="polyline";t("dojox.gfx.svg.Image",[a.Shape,o.Image],{setShape:function(b){this.shape=l.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,g;for(g in this.shape)g!="type"&&g!="src"&&b.setAttribute(g,this.shape[g]);b.setAttribute("preserveAspectRatio","none");b.setAttributeNS(a.xmlns.xlink,"xlink:href",this.shape.src);b.__gfxObject__=this.getUID();
return this}});a.Image.nodeType="image";t("dojox.gfx.svg.Text",[a.Shape,o.Text],{setShape:function(b){this.shape=l.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,a=this.shape;b.setAttribute("x",a.x);b.setAttribute("y",a.y);b.setAttribute("text-anchor",a.align);b.setAttribute("text-decoration",a.decoration);b.setAttribute("rotate",a.rotated?90:0);b.setAttribute("kerning",a.kerning?"auto":0);b.setAttribute("text-rendering","optimizeLegibility");b.firstChild?b.firstChild.nodeValue=a.text:
b.appendChild(q(a.text));return this},getTextWidth:function(){var b=this.rawNode,a=b.parentNode,b=b.cloneNode(true);b.style.visibility="hidden";var g=0,i=b.firstChild.nodeValue;a.appendChild(b);if(i!="")for(;!g;)g=b.getBBox?parseInt(b.getBBox().width):68;a.removeChild(b);return g}});a.Text.nodeType="text";t("dojox.gfx.svg.Path",[a.Shape,k.Path],{_updateWithSegment:function(b){this.inherited(arguments);typeof this.shape.path=="string"&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(b){this.inherited(arguments);
this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});a.Path.nodeType="path";t("dojox.gfx.svg.TextPath",[a.Shape,k.TextPath],{_updateWithSegment:function(b){this.inherited(arguments);this._setTextPath()},setShape:function(b){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if(typeof this.shape.path=="string"){var b=this.rawNode;if(!b.firstChild){var g=m(a.xmlns.svg,"textPath"),i=q("");g.appendChild(i);b.appendChild(g)}g=
(g=b.firstChild.getAttributeNS(a.xmlns.xlink,"href"))&&a.getRef(g);if(!g)if(i=this._getParentSurface()){var i=i.defNode,g=m(a.xmlns.svg,"path"),c=l._base._getUniqueId();g.setAttribute("id",c);i.appendChild(g);b.firstChild.setAttributeNS(a.xmlns.xlink,"xlink:href","#"+c)}g&&g.setAttribute("d",this.shape.path)}},_setText:function(){var b=this.rawNode;if(!b.firstChild){var g=m(a.xmlns.svg,"textPath"),i=q("");g.appendChild(i);b.appendChild(g)}b=b.firstChild;g=this.text;b.setAttribute("alignment-baseline",
"middle");switch(g.align){case "middle":b.setAttribute("text-anchor","middle");b.setAttribute("startOffset","50%");break;case "end":b.setAttribute("text-anchor","end");b.setAttribute("startOffset","100%");break;default:b.setAttribute("text-anchor","start");b.setAttribute("startOffset","0%")}b.setAttribute("baseline-shift","0.5ex");b.setAttribute("text-decoration",g.decoration);b.setAttribute("rotate",g.rotated?90:0);b.setAttribute("kerning",g.kerning?"auto":0);b.firstChild.data=g.text}});a.TextPath.nodeType=
"text";t("dojox.gfx.svg.Surface",o.Surface,{constructor:function(){o.Container._init.call(this)},destroy:function(){this.defNode=null;this.inherited(arguments)},setDimensions:function(b,a){if(!this.rawNode)return this;this.rawNode.setAttribute("width",b);this.rawNode.setAttribute("height",a);return this},getDimensions:function(){return this.rawNode?{width:l.normalizedLength(this.rawNode.getAttribute("width")),height:l.normalizedLength(this.rawNode.getAttribute("height"))}:null}});a.createSurface=
function(b,g,i){var c=new a.Surface;c.rawNode=m(a.xmlns.svg,"svg");c.rawNode.setAttribute("overflow","hidden");g&&c.rawNode.setAttribute("width",g);i&&c.rawNode.setAttribute("height",i);g=m(a.xmlns.svg,"defs");c.rawNode.appendChild(g);c.defNode=g;c._parent=n.byId(b);c._parent.appendChild(c.rawNode);return c};var t={_setFont:function(){var b=this.fontStyle;this.rawNode.setAttribute("font-style",b.style);this.rawNode.setAttribute("font-variant",b.variant);this.rawNode.setAttribute("font-weight",b.weight);
this.rawNode.setAttribute("font-size",b.size);this.rawNode.setAttribute("font-family",b.family)}},g=o.Container,k={openBatch:function(){var b;b=a.useSvgWeb?u.doc.createDocumentFragment(true):u.doc.createDocumentFragment();this.fragment=b},closeBatch:function(){if(this.fragment){this.rawNode.appendChild(this.fragment);delete this.fragment}},add:function(b){if(this!=b.getParent()){this.fragment?this.fragment.appendChild(b.rawNode):this.rawNode.appendChild(b.rawNode);g.add.apply(this,arguments)}return this},
remove:function(b,a){if(this==b.getParent()){this.rawNode==b.rawNode.parentNode&&this.rawNode.removeChild(b.rawNode);this.fragment&&this.fragment==b.rawNode.parentNode&&this.fragment.removeChild(b.rawNode);g.remove.apply(this,arguments)}return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var i=this.defNode;if(i){for(;i.lastChild;)i.removeChild(i.lastChild);a.appendChild(i)}return g.clear.apply(this,arguments)},_moveChildToFront:g._moveChildToFront,_moveChildToBack:g._moveChildToBack},
i={createObject:function(b,g){if(!this.rawNode)return null;var i=new b,c=m(a.xmlns.svg,b.nodeType);i.setRawNode(c);i.setShape(g);this.add(i);return i}};f.extend(a.Text,t);f.extend(a.TextPath,t);f.extend(a.Group,k);f.extend(a.Group,o.Creator);f.extend(a.Group,i);f.extend(a.Surface,k);f.extend(a.Surface,o.Creator);f.extend(a.Surface,i);a.fixTarget=function(a){if(!a.gfxTarget)a.gfxTarget=y&&a.target.wholeText?o.byId(a.target.parentElement.__gfxObject__):o.byId(a.target.__gfxObject__);return true};if(a.useSvgWeb){a.createSurface=
function(b,g,i){var k=new a.Surface;if(!g||!i)var o=c.position(b),g=g||o.w,i=i||o.h;var b=n.byId(b),o=b.id?b.id+"_svgweb":l._base._getUniqueId(),f=m(a.xmlns.svg,"svg");f.id=o;f.setAttribute("width",g);f.setAttribute("height",i);svgweb.appendChild(f,b);f.addEventListener("SVGLoad",function(){k.rawNode=this;k.isLoaded=true;var b=m(a.xmlns.svg,"defs");k.rawNode.appendChild(b);k.defNode=b;if(k.onLoad)k.onLoad(k)},false);k.isLoaded=false;return k};a.Surface.extend({destroy:function(){var a=this.rawNode;
svgweb.removeChild(a,a.parentNode)}});t={connect:function(a,g,i){a.substring(0,2)==="on"&&(a=a.substring(2));i=arguments.length==2?g:f.hitch(g,i);this.getEventSource().addEventListener(a,i,false);return[this,a,i]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],false);delete a[0]}};f.extend(a.Shape,t);f.extend(a.Surface,t)}return a})},"dojox/gfx/Mover":function(){define("dojox/gfx/Mover",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect","dojo/_base/event"],
function(f,u,n,t,w){return n("dojox.gfx.Mover",null,{constructor:function(c,f,l){this.shape=c;this.lastX=f.clientX;this.lastY=f.clientY;c=this.host=l;f=document;l=t.connect(f,"onmousemove",this,"onFirstMove");this.events=[t.connect(f,"onmousemove",this,"onMouseMove"),t.connect(f,"onmouseup",this,"destroy"),t.connect(f,"ondragstart",w,"stop"),t.connect(f,"onselectstart",w,"stop"),l];if(c&&c.onMoveStart)c.onMoveStart(this)},onMouseMove:function(c){var f=c.clientX,l=c.clientY;this.host.onMove(this,{dx:f-
this.lastX,dy:l-this.lastY});this.lastX=f;this.lastY=l;w.stop(c)},onFirstMove:function(){this.host.onFirstMove(this);t.disconnect(this.events.pop())},destroy:function(){u.forEach(this.events,t.disconnect);var c=this.host;if(c&&c.onMoveStop)c.onMoveStop(this);this.events=this.shape=null}})})},"dojox/gfx/path":function(){define("dojox/gfx/path",["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(f,u,n,t,w){f.path={};w=n("dojox.gfx.path.Path",w.Shape,{constructor:function(c){this.shape=
u.clone(f.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=c;this.segmented=!1},setAbsoluteMode:function(c){this._confirmSegmented();this.absolute="string"==typeof c?"absolute"==c:c;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var c=this.bbox,f=this._getRealMatrix();this.bbox=null;for(var l=0,o=this.segments.length;l<o;++l)this._updateWithSegment(this.segments[l],f);f=this.bbox;this.bbox=c;return this.tbbox=f?[{x:f.l,y:f.t},{x:f.r,y:f.t},{x:f.r,y:f.b},{x:f.l,y:f.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(c,f,l){l&&(f=t.multiplyPoint(l,
c,f),c=f.x,f=f.y);if(this.bbox&&"l"in this.bbox){if(this.bbox.l>c&&(this.bbox.l=c),this.bbox.r<c&&(this.bbox.r=c),this.bbox.t>f&&(this.bbox.t=f),this.bbox.b<f)this.bbox.b=f}else this.bbox={l:c,b:f,r:c,t:f}},_updateWithSegment:function(c,n){var l=c.args,o=l.length,k;switch(c.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(k=0;k<o;k+=2)this._updateBBox(l[k],l[k+1],n);this.last.x=l[o-2];this.last.y=l[o-1];this.absolute=!0;break;case "H":for(k=0;k<o;++k)this._updateBBox(l[k],this.last.y,
n);this.last.x=l[o-1];this.absolute=!0;break;case "V":for(k=0;k<o;++k)this._updateBBox(this.last.x,l[k],n);this.last.y=l[o-1];this.absolute=!0;break;case "m":k=0;"x"in this.last||(this._updateBBox(this.last.x=l[0],this.last.y=l[1],n),k=2);for(;k<o;k+=2)this._updateBBox(this.last.x+=l[k],this.last.y+=l[k+1],n);this.absolute=!1;break;case "l":case "t":for(k=0;k<o;k+=2)this._updateBBox(this.last.x+=l[k],this.last.y+=l[k+1],n);this.absolute=!1;break;case "h":for(k=0;k<o;++k)this._updateBBox(this.last.x+=
l[k],this.last.y,n);this.absolute=!1;break;case "v":for(k=0;k<o;++k)this._updateBBox(this.last.x,this.last.y+=l[k],n);this.absolute=!1;break;case "c":for(k=0;k<o;k+=6)this._updateBBox(this.last.x+l[k],this.last.y+l[k+1],n),this._updateBBox(this.last.x+l[k+2],this.last.y+l[k+3],n),this._updateBBox(this.last.x+=l[k+4],this.last.y+=l[k+5],n);this.absolute=!1;break;case "s":case "q":for(k=0;k<o;k+=4)this._updateBBox(this.last.x+l[k],this.last.y+l[k+1],n),this._updateBBox(this.last.x+=l[k+2],this.last.y+=
l[k+3],n);this.absolute=!1;break;case "A":for(k=0;k<o;k+=7)this._updateBBox(l[k+5],l[k+6],n);this.last.x=l[o-2];this.last.y=l[o-1];this.absolute=!0;break;case "a":for(k=0;k<o;k+=7)this._updateBBox(this.last.x+=l[k+5],this.last.y+=l[k+6],n);this.absolute=!1}var m=[c.action];for(k=0;k<o;++k)m.push(f.formatNumber(l[k],!0));"string"==typeof this.shape.path?this.shape.path+=m.join(""):Array.prototype.push.apply(this.shape.path,m)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(c,
f){this.tbbox=null;var l=this._validSegments[c.toLowerCase()];"number"==typeof l&&(l?f.length>=l&&(l={action:c,args:f.slice(0,f.length-f.length%l)},this.segments.push(l),this._updateWithSegment(l)):(l={action:c,args:[]},this.segments.push(l),this._updateWithSegment(l)))},_collectArgs:function(c,f){for(var l=0;l<f.length;++l){var o=f[l];"boolean"==typeof o?c.push(o?1:0):"number"==typeof o?c.push(o):o instanceof Array?this._collectArgs(c,o):"x"in o&&"y"in o&&c.push(o.x,o.y)}},moveTo:function(){this._confirmSegmented();
var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"M":"m",c);return this},lineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"L":"l",c);return this},hLineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"H":"h",c);return this},vLineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"V":"v",c);
return this},curveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"C":"c",c);return this},smoothCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"S":"s",c);return this},qCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"Q":"q",c);return this},qSmoothCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,
arguments);this._pushSegment(this.absolute?"T":"t",c);return this},arcTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"A":"a",c);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var c=this.shape.path;this.shape.path=[];this._setPath(c);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(c){c=u.isArray(c)?c:c.match(f.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(c){for(var n="",l=[],o=c.length,k=0;k<o;++k){var m=c[k],q=parseFloat(m);isNaN(q)?(n&&this._pushSegment(n,l),l=[],n=m):l.push(q)}this._pushSegment(n,l)}},setShape:function(c){this.inherited(arguments,["string"==typeof c?{path:c}:c]);this.segmented=!1;this.segments=[];f.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});n=n("dojox.gfx.path.TextPath",w,{constructor:function(){"text"in this||(this.text=u.clone(f.defaultTextPath));
"fontStyle"in this||(this.fontStyle=u.clone(f.defaultFont))},getText:function(){return this.text},setText:function(c){this.text=f.makeParameters(this.text,"string"==typeof c?{text:c}:c);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(c){this.fontStyle="string"==typeof c?f.splitFontString(c):f.makeParameters(f.defaultFont,c);this._setFont();return this}});return{Path:w,TextPath:n}})},"dojox/gfx/_gfxBidiSupport":function(){define("dojox/gfx/_gfxBidiSupport","./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape dojox/string/BidiEngine".split(" "),
function(f,u,n,t,w,c,s,l,o){function k(a,i){var c=m(i);c&&f.utils.forEach(a,function(a){if(a instanceof f.Surface||a instanceof f.Group)a.textDir=c;a instanceof f.Text&&a.setShape({textDir:c});a instanceof f.TextPath&&a.setText({textDir:c})},a);return a}function m(a){var i=["ltr","rtl","auto"];if(a){a=a.toLowerCase();if(c.indexOf(i,a)<0)return null}return a}u.getObject("dojox.gfx._gfxBidiSupport",true);switch(f.renderer){case "vml":f.isVml=true;break;case "svg":f.isSvg=true;if(f.svg.useSvgWeb)f.isSvgWeb=
true;break;case "silverlight":f.isSilverlight=true;break;case "canvas":f.isCanvas=true}var q=new o;u.extend(f.shape.Surface,{textDir:"",setTextDir:function(a){k(this,a)},getTextDir:function(){return this.textDir}});u.extend(f.Group,{textDir:"",setTextDir:function(a){k(this,a)},getTextDir:function(){return this.textDir}});u.extend(f.Text,{textDir:"",formatText:function(a,i){if(i&&a&&a.length>1){var c="ltr",g=i;if(g=="auto"){if(f.isVml)return a;g=q.checkContextual(a)}if(f.isVml){c=q.checkContextual(a);
return g!=c?g=="rtl"?!q.hasBidiChar(a)?q.bidiTransform(a,"IRNNN","ILNNN"):"\u200f\u200f"+a:"\u200e"+a:a}if(f.isSvgWeb)return g=="rtl"?q.bidiTransform(a,"IRNNN","ILNNN"):a;if(f.isSilverlight)return g=="rtl"?q.bidiTransform(a,"IRNNN","VLYNN"):q.bidiTransform(a,"ILNNN","VLYNN");if(f.isCanvas)return g=="rtl"?"\u202b"+a+"\u202c":"\u202a"+a+"\u202c";if(f.isSvg){if(n("ff"))return g=="rtl"?q.bidiTransform(a,"IRYNN","VLNNN"):q.bidiTransform(a,"ILYNN","VLNNN");if(n("chrome")||n("safari")||n("opera"))return"\u200e"+
(g=="rtl"?"\u202b":"\u202a")+a+"\u202c"}}return a},bidiPreprocess:function(a){return a}});u.extend(f.TextPath,{textDir:"",formatText:function(a,i){if(i&&a&&a.length>1){var c="ltr",g=i;if(g=="auto"){if(f.isVml)return a;g=q.checkContextual(a)}if(f.isVml){c=q.checkContextual(a);return g!=c?g=="rtl"?!q.hasBidiChar(a)?q.bidiTransform(a,"IRNNN","ILNNN"):"\u200f\u200f"+a:"\u200e"+a:a}if(f.isSvgWeb)return g=="rtl"?q.bidiTransform(a,"IRNNN","ILNNN"):a;f.isSvg&&(a=n("opera")?"\u200e"+(g=="rtl"?"\u202b":"\u202a")+
a+"\u202c":g=="rtl"?q.bidiTransform(a,"IRYNN","VLNNN"):q.bidiTransform(a,"ILYNN","VLNNN"))}return a},bidiPreprocess:function(a){if(a&&typeof a=="string"){this.origText=a;a=this.formatText(a,this.textDir)}return a}});s=function(a,i,c,g){var b=a.prototype[i];a.prototype[i]=function(){var a;c&&(a=c.apply(this,arguments));a=b.call(this,a);g&&(a=g.call(this,a,arguments));return a}};l=function(a){if(a){if(a.textDir)a.textDir=m(a.textDir);if(a.text&&a.text instanceof Array)a.text=a.text.join(",")}if(a&&
(a.text!=void 0||a.textDir)&&(this.textDir!=a.textDir||a.text!=this.origText)){this.origText=a.text!=void 0?a.text:this.origText;if(a.textDir)this.textDir=a.textDir;a.text=this.formatText(this.origText,this.textDir)}return this.bidiPreprocess(a)};s(f.Text,"setShape",l,null);s(f.TextPath,"setText",l,null);l=function(a){if((a=u.clone(a))&&this.origText)a.text=this.origText;return a};s(f.Text,"getShape",null,l);s(f.TextPath,"getText",null,l);l=function(a,i){var c;i&&i[0]&&(c=m(i[0]));a.setTextDir(c?
c:this.textDir);return a};s(f.Surface,"createGroup",null,l);s(f.Group,"createGroup",null,l);l=function(a){if(a){var i=a.textDir?m(a.textDir):this.textDir;if(i)a.textDir=i}return a};s(f.Surface,"createText",l,null);s(f.Surface,"createTextPath",l,null);s(f.Group,"createText",l,null);s(f.Group,"createTextPath",l,null);f.createSurface=function(a,i,c,g){i=f[f.renderer].createSurface(a,i,c);g=m(g);if(f.isSvgWeb){i.textDir=g?g:w.style(t.byId(a),"direction");return i}if(f.isVml||f.isSvg||f.isCanvas)i.textDir=
g?g:w.style(i.rawNode,"direction");if(f.isSilverlight)i.textDir=g?g:w.style(i._nodes[1],"direction");return i};return f})},"dojox/gfx/canvasWithEvents":function(){define("dojox/gfx/canvasWithEvents","dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/Color dojo/dom dojo/dom-geometry ./_base ./canvas ./shape ./matrix".split(" "),function(f,u,n,t,w,c,s,l,o,k){var m=s.canvasWithEvents={};u("dojox.gfx.canvasWithEvents.Shape",l.Shape,{_testInputs:function(a,b){if(!this.canvasFill&&this.strokeStyle)this._hitTestPixel(a,
b);else{this._renderShape(a);for(var i=this.getTransform(),c=0;c<b.length;++c){var m=b[c];if(!m.target){var f=m.x,l=m.y,f=i?k.multiplyPoint(k.invert(i),f,l):{x:f,y:l};m.target=this._hitTestGeometry(a,f.x,f.y)}}}},_hitTestPixel:function(a,b){for(var i=0;i<b.length;++i){var c=b[i];if(!c.target){var m=c.x,k=c.y;a.clearRect(0,0,1,1);a.save();a.translate(-m,-k);this._render(a,true);c.target=a.getImageData(0,0,1,1).data[0]?this:null;a.restore()}}},_hitTestGeometry:function(a,b,i){return a.isPointInPath(b,
i)?this:null},_renderFill:function(a,b){a.pickingMode?"canvasFill"in this&&b&&a.fill():this.inherited(arguments)},_renderStroke:function(a,b){if(this.strokeStyle&&a.pickingMode){var i=this.strokeStyle.color;try{this.strokeStyle.color=new t(a.strokeStyle);this.inherited(arguments)}finally{this.strokeStyle.color=i}}else this.inherited(arguments)},getEventSource:function(){return this.surface.getEventSource()},connect:function(a,b,i){this.surface._setupEvents(a);return arguments.length>2?n.connect(this,
a,b,i):n.connect(this,a,b)},disconnect:function(a){n.disconnect(a)},oncontextmenu:function(){},onclick:function(){},ondblclick:function(){},onmouseenter:function(){},onmouseleave:function(){},onmouseout:function(){},onmousedown:function(){},ontouchstart:function(){},touchstart:function(){},onmouseup:function(){},ontouchend:function(){},touchend:function(){},onmouseover:function(){},onmousemove:function(){},ontouchmove:function(){},touchmove:function(){},onkeydown:function(){},onkeyup:function(){}});
u("dojox.gfx.canvasWithEvents.Group",[m.Shape,l.Group],{_testInputs:function(a,b){var i=this.children,c=this.getTransform(),m;if(i.length!=0){var f=[];for(m=0;m<b.length;++m){var l=b[m];f[m]={x:l.x,y:l.y};if(!l.target){var o=l.x,q=l.y,o=c?k.multiplyPoint(k.invert(c),o,q):{x:o,y:q};l.x=o.x;l.y=o.y}}for(m=i.length-1;m>=0;--m){i[m]._testInputs(a,b);l=true;for(c=0;c<b.length;++c)if(b[c].target==null){l=false;break}if(l)break}for(m=0;m<b.length;++m){b[m].x=f[m].x;b[m].y=f[m].y}}}});u("dojox.gfx.canvasWithEvents.Image",
[m.Shape,l.Image],{_renderShape:function(a){var b=this.shape;a.pickingMode?a.fillRect(b.x,b.y,b.width,b.height):this.inherited(arguments)},_hitTestGeometry:function(a,b,i){a=this.shape;return b>=a.x&&b<=a.x+a.width&&i>=a.y&&i<=a.y+a.height?this:null}});u("dojox.gfx.canvasWithEvents.Text",[m.Shape,l.Text],{_testInputs:function(a,b){return this._hitTestPixel(a,b)}});u("dojox.gfx.canvasWithEvents.Rect",[m.Shape,l.Rect],{});u("dojox.gfx.canvasWithEvents.Circle",[m.Shape,l.Circle],{});u("dojox.gfx.canvasWithEvents.Ellipse",
[m.Shape,l.Ellipse],{});u("dojox.gfx.canvasWithEvents.Line",[m.Shape,l.Line],{});u("dojox.gfx.canvasWithEvents.Polyline",[m.Shape,l.Polyline],{});u("dojox.gfx.canvasWithEvents.Path",[m.Shape,l.Path],{});u("dojox.gfx.canvasWithEvents.TextPath",[m.Shape,l.TextPath],{});var q={onmouseenter:"onmousemove",onmouseleave:"onmousemove",onmouseout:"onmousemove",onmouseover:"onmousemove",touchstart:"ontouchstart",touchend:"ontouchend",touchmove:"ontouchmove"},a={ontouchstart:"touchstart",ontouchend:"touchend",
ontouchmove:"touchmove"},i=navigator.userAgent.toLowerCase(),y=i.search("iphone")>-1||i.search("ipad")>-1||i.search("ipod")>-1;u("dojox.gfx.canvasWithEvents.Surface",l.Surface,{constructor:function(){this._pick={curr:null,last:null};this._pickOfMouseUp=this._pickOfMouseDown=null},connect:function(a,b,i){if(a.indexOf("touch")!==-1){this._setupEvents(a);return n.connect(this,"_on"+a+"Impl_",b,i)}this._initMirrorCanvas();return n.connect(this.getEventSource(),a,null,o.fixCallback(this,s.fixTarget,b,
i))},_ontouchstartImpl_:function(){},_ontouchendImpl_:function(){},_ontouchmoveImpl_:function(){},_initMirrorCanvas:function(){if(!this.mirrorCanvas){var a=this._parent,b=a.ownerDocument.createElement("canvas");b.width=1;b.height=1;b.style.position="absolute";b.style.left="-99999px";b.style.top="-99999px";a.appendChild(b);this.mirrorCanvas=b}},_setupEvents:function(a){a in q&&(a=q[a]);if(!this._eventsH||!this._eventsH[a]){this._initMirrorCanvas();if(!this._eventsH)this._eventsH={};this._eventsH[a]=
n.connect(this.getEventSource(),a,o.fixCallback(this,s.fixTarget,this,"_"+a));if(a==="onclick"||a==="ondblclick"){this._eventsH.onmousedown||(this._eventsH.onmousedown=n.connect(this.getEventSource(),"onmousedown",o.fixCallback(this,s.fixTarget,this,"_onmousedown")));this._eventsH.onmouseup||(this._eventsH.onmouseup=n.connect(this.getEventSource(),"onmouseup",o.fixCallback(this,s.fixTarget,this,"_onmouseup")))}}},destroy:function(){l.Surface.destroy.apply(this);for(var a in this._eventsH)n.disconnect(this._eventsH[a]);
this._eventsH=this.mirrorCanvas=null},getEventSource:function(){return this.rawNode},_invokeHandler:function(g,b,i){var c=g[b];if(c&&c.after)c.apply(g,[i]);else if(b in a)(c=g[a[b]])&&c.after&&c.apply(g,[i]);if(!c&&b.indexOf("touch")!==-1){b="_"+b+"Impl_";(c=g[b])&&c.apply(g,[i])}!(i.cancelBubble!==void 0&&i.cancelBubble)&&g.parent&&this._invokeHandler(g.parent,b,i)},_oncontextmenu:function(a){this._pick.curr&&this._invokeHandler(this._pick.curr,"oncontextmenu",a)},_ondblclick:function(a){this._pickOfMouseUp&&
this._invokeHandler(this._pickOfMouseUp,"ondblclick",a)},_onclick:function(a){this._pickOfMouseUp&&this._pickOfMouseUp==this._pickOfMouseDown&&this._invokeHandler(this._pickOfMouseUp,"onclick",a)},_onmousedown:function(a){(this._pickOfMouseDown=this._pick.curr)&&this._invokeHandler(this._pick.curr,"onmousedown",a)},_ontouchstart:function(a){this._pick.curr&&this._fireTouchEvent(a)},_onmouseup:function(a){(this._pickOfMouseUp=this._pick.curr)&&this._invokeHandler(this._pick.curr,"onmouseup",a)},_ontouchend:function(a){if(this._pick.curr)for(var b=
0;b<this._pick.curr.length;++b)if(this._pick.curr[b].target){a.gfxTarget=this._pick.curr[b].target;this._invokeHandler(this._pick.curr[b].target,"ontouchend",a)}},_onmousemove:function(a){if(this._pick.last&&this._pick.last!=this._pick.curr){this._invokeHandler(this._pick.last,"onmouseleave",a);this._invokeHandler(this._pick.last,"onmouseout",a)}if(this._pick.curr)if(this._pick.last==this._pick.curr)this._invokeHandler(this._pick.curr,"onmousemove",a);else{this._invokeHandler(this._pick.curr,"onmouseenter",
a);this._invokeHandler(this._pick.curr,"onmouseover",a)}},_ontouchmove:function(a){this._pick.curr&&this._fireTouchEvent(a)},_fireTouchEvent:function(a){for(var b=[],i=0;i<this._pick.curr.length;++i){var c=this._pick.curr[i];if(c.target){var m=c.target.__gfxtt;if(!m){m=[];c.target.__gfxtt=m}m.push(c.t);if(!c.target.__inToFire){b.push(c.target);c.target.__inToFire=true}}}if(b.length===0)this._invokeHandler(this,"on"+a.type,a);else for(i=0;i<b.length;++i)(function(){var c=b[i].__gfxtt,m=f.delegate(a,
{gfxTarget:b[i]});if(y){m.preventDefault=function(){a.preventDefault()};m.stopPropagation=function(){a.stopPropagation()}}m.__defineGetter__("targetTouches",function(){return c});delete b[i].__gfxtt;delete b[i].__inToFire;this._invokeHandler(b[i],"on"+a.type,m)}).call(this)},_onkeydown:function(){},_onkeyup:function(){},_whatsUnderEvent:function(a){var b=c.position(this.rawNode,true),i=[],m=a.changedTouches,k=a.touches;if(m)for(a=0;a<m.length;++a)i.push({t:m[a],x:m[a].pageX-b.x,y:m[a].pageY-b.y});
else if(k)for(a=0;a<k.length;++a)i.push({t:k[a],x:k[a].pageX-b.x,y:k[a].pageY-b.y});else i.push({x:a.pageX-b.x,y:a.pageY-b.y});var a=this.mirrorCanvas,b=a.getContext("2d"),f=this.children;b.clearRect(0,0,a.width,a.height);b.save();b.strokeStyle="rgba(127,127,127,1.0)";b.fillStyle="rgba(127,127,127,1.0)";b.pickingMode=true;for(a=f.length-1;a>=0;a--){f[a]._testInputs(b,i);var l=true;for(j=0;j<i.length;++j)if(i[j].target==null){l=false;break}if(l)break}b.restore();return k||m?i:i[0].target}});m.createSurface=
function(a,b,i){if(!b&&!i)var k=c.position(a),b=b||k.w,i=i||k.h;typeof b=="number"&&(b=b+"px");typeof i=="number"&&(i=i+"px");var k=new m.Surface,a=w.byId(a),f=a.ownerDocument.createElement("canvas");f.width=s.normalizedLength(b);f.height=s.normalizedLength(i);a.appendChild(f);k.rawNode=f;k._parent=a;return k.surface=k};m.fixTarget=function(a,b){if(a.cancelBubble!==void 0&&a.cancelBubble)return false;if(!a.gfxTarget){b._pick.last=b._pick.curr;b._pick.curr=b._whatsUnderEvent(a);if(!f.isArray(b._pick.curr))a.gfxTarget=
b._pick.curr}return true};return m})},"dojox/html/metrics":function(){define("dojox/html/metrics","dojo/_base/kernel dojo/_base/lang dojo/_base/sniff dojo/ready dojo/_base/unload dojo/_base/window dojo/dom-geometry".split(" "),function(f,u,n,t,w,c,s){var l=u.getObject("dojox.html.metrics",true),o=u.getObject("dojox");l.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(n("ie"))c.doc.documentElement.style.fontSize=
"100%";var g=c.doc.createElement("div"),b=g.style;b.position="absolute";b.left="-100px";b.top="0";b.width="30px";b.height="1000em";b.borderWidth="0";b.margin="0";b.padding="0";b.outline="0";b.lineHeight="1";b.overflow="hidden";c.body().appendChild(g);for(var i in a){b.fontSize=i;a[i]=Math.round(g.offsetHeight*12/16)*16/12/1E3}c.body().removeChild(g);return a};var k=null;l.getCachedFontMeasurements=function(a){if(a||!k)k=l.getFontMeasurements();return k};var m=null,q={};l.getTextBox=function(a,g,b){var i,
k;if(m)i=m;else{i=m=c.doc.createElement("div");var f=c.doc.createElement("div");f.appendChild(i);k=f.style;k.overflow="scroll";k.position="absolute";k.left="0px";k.top="-10000px";k.width="1px";k.height="1px";k.visibility="hidden";k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";c.body().appendChild(f)}i.className="";k=i.style;k.borderWidth="0";k.margin="0";k.padding="0";k.outline="0";if(arguments.length>1&&g)for(var l in g)l in q||(k[l]=g[l]);if(arguments.length>2&&b)i.className=b;i.innerHTML=
a;k=s.position(i);k.w=i.parentNode.scrollWidth;return k};var a=16,i=16;l.getScrollbar=function(){return{w:a,h:i}};l._fontResizeNode=null;l.initOnFontResize=function(){var a=l._fontResizeNode=c.doc.createElement("iframe"),g=a.style;g.position="absolute";g.width="5em";g.height="10em";g.top="-10000px";n("ie")?a.onreadystatechange=function(){if(a.contentWindow.document.readyState=="complete")a.onresize=a.contentWindow.parent[o._scopeName].html.metrics._fontresize}:a.onload=function(){a.contentWindow.onresize=
a.contentWindow.parent[o._scopeName].html.metrics._fontresize};a.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");c.body().appendChild(a);l.initOnFontResize=function(){}};l.onFontResize=function(){};l._fontresize=function(){l.onFontResize()};w.addOnUnload(function(){var a=l._fontResizeNode;if(a){if(n("ie")&&a.onresize)a.onresize=null;else if(a.contentWindow&&a.contentWindow.onresize)a.contentWindow.onresize=
null;l._fontResizeNode=null}});t(function(){try{var m=c.doc.createElement("div");m.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";c.body().appendChild(m);a=m.offsetWidth-m.clientWidth;i=m.offsetHeight-m.clientHeight;c.body().removeChild(m);delete m}catch(g){}"fontSizeWatch"in f.config&&f.config.fontSizeWatch&&l.initOnFontResize()});return l})},"dojox/gfx/decompose":function(){define("dojox/gfx/decompose",["./_base","dojo/_base/lang","./matrix"],
function(f,u,n){function t(c,k){return Math.abs(c-k)<=1.0E-6*(Math.abs(c)+Math.abs(k))}function w(c,k,m,f){if(isFinite(c)){if(!isFinite(m))return c}else return m;k=Math.abs(k);f=Math.abs(f);return(k*c+f*m)/(k+f)}function c(c){var c=n.normalize(c),k=-c.xx-c.yy,m=c.xx*c.yy-c.xy*c.yx,f=Math.sqrt(k*k-4*m),k=-(k+(0>k?-f:f))/2,m=m/k,f=c.xy/(k-c.xx),a=1,i=c.xy/(m-c.xx),l=1;t(k,m)&&(f=1,i=a=0,l=1);isFinite(f)||(f=1,a=(k-c.xx)/c.xy,isFinite(a)||(f=(k-c.yy)/c.yx,a=1,isFinite(f)||(f=1,a=c.yx/(k-c.yy))));isFinite(i)||
(i=1,l=(m-c.xx)/c.xy,isFinite(l)||(i=(m-c.yy)/c.yx,l=1,isFinite(i)||(i=1,l=c.yx/(m-c.yy))));var c=Math.sqrt(f*f+a*a),g=Math.sqrt(i*i+l*l);if(!isFinite(f/=c))f=0;if(!isFinite(a/=c))a=0;if(!isFinite(i/=g))i=0;if(!isFinite(l/=g))l=0;return{value1:k,value2:m,vector1:{x:f,y:a},vector2:{x:i,y:l}}}function s(c,k){var m=0>c.xx*c.yy||0<c.xy*c.yx?-1:1,f=k.angle1=(Math.atan2(c.yx,c.yy)+Math.atan2(-m*c.xy,m*c.xx))/2,m=Math.cos(f),f=Math.sin(f);k.sx=w(c.xx/m,m,-c.xy/f,f);k.sy=w(c.yy/m,m,c.yx/f,f);return k}function l(c,
k){var m=0>c.xx*c.yy||0<c.xy*c.yx?-1:1,f=k.angle2=(Math.atan2(m*c.yx,m*c.xx)+Math.atan2(-c.xy,c.yy))/2,m=Math.cos(f),f=Math.sin(f);k.sx=w(c.xx/m,m,c.yx/f,f);k.sy=w(c.yy/m,m,-c.xy/f,f);return k}return f.decompose=function(f){var k=n.normalize(f),f={dx:k.dx,dy:k.dy,sx:1,sy:1,angle1:0,angle2:0};if(t(k.xy,0)&&t(k.yx,0))return u.mixin(f,{sx:k.xx,sy:k.yy});if(t(k.xx*k.yx,-k.xy*k.yy))return s(k,f);if(t(k.xx*k.xy,-k.yx*k.yy))return l(k,f);var m,q=new n.Matrix2D(k);m=u.mixin(q,{dx:0,dy:0,xy:q.yx,yx:q.xy});
q=c([k,m]);m=c([m,k]);q=new n.Matrix2D({xx:q.vector1.x,xy:q.vector2.x,yx:q.vector1.y,yy:q.vector2.y});m=new n.Matrix2D({xx:m.vector1.x,xy:m.vector1.y,yx:m.vector2.x,yy:m.vector2.y});k=new n.Matrix2D([n.invert(q),k,n.invert(m)]);s(m,f);k.xx*=f.sx;k.yy*=f.sy;l(q,f);k.xx*=f.sx;k.yy*=f.sy;return u.mixin(f,{sx:k.xx,sy:k.yy})}})},"dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(f,u){var n=f.matrix={},t={};n._degToRad=function(f){return t[f]||(t[f]=Math.PI*f/
180)};n._radToDeg=function(f){return 180*(f/Math.PI)};n.Matrix2D=function(f){if(f)if("number"==typeof f)this.xx=this.yy=f;else if(f instanceof Array){if(0<f.length){for(var c=n.normalize(f[0]),s=1;s<f.length;++s){var l=c,o=n.normalize(f[s]),c=new n.Matrix2D;c.xx=l.xx*o.xx+l.xy*o.yx;c.xy=l.xx*o.xy+l.xy*o.yy;c.yx=l.yx*o.xx+l.yy*o.yx;c.yy=l.yx*o.xy+l.yy*o.yy;c.dx=l.xx*o.dx+l.xy*o.dy+l.dx;c.dy=l.yx*o.dx+l.yy*o.dy+l.dy}u.mixin(this,c)}}else u.mixin(this,f)};u.extend(n.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,
dy:0});u.mixin(n,{identity:new n.Matrix2D,flipX:new n.Matrix2D({xx:-1}),flipY:new n.Matrix2D({yy:-1}),flipXY:new n.Matrix2D({xx:-1,yy:-1}),translate:function(f,c){return 1<arguments.length?new n.Matrix2D({dx:f,dy:c}):new n.Matrix2D({dx:f.x,dy:f.y})},scale:function(f,c){return 1<arguments.length?new n.Matrix2D({xx:f,yy:c}):"number"==typeof f?new n.Matrix2D({xx:f,yy:f}):new n.Matrix2D({xx:f.x,yy:f.y})},rotate:function(f){var c=Math.cos(f),f=Math.sin(f);return new n.Matrix2D({xx:c,xy:-f,yx:f,yy:c})},
rotateg:function(f){return n.rotate(n._degToRad(f))},skewX:function(f){return new n.Matrix2D({xy:Math.tan(f)})},skewXg:function(f){return n.skewX(n._degToRad(f))},skewY:function(f){return new n.Matrix2D({yx:Math.tan(f)})},skewYg:function(f){return n.skewY(n._degToRad(f))},reflect:function(f,c){1==arguments.length&&(c=f.y,f=f.x);var s=f*f,l=c*c,o=s+l,k=2*f*c/o;return new n.Matrix2D({xx:2*s/o-1,xy:k,yx:k,yy:2*l/o-1})},project:function(f,c){1==arguments.length&&(c=f.y,f=f.x);var s=f*f,l=c*c,o=s+l,k=
f*c/o;return new n.Matrix2D({xx:s/o,xy:k,yx:k,yy:l/o})},normalize:function(f){return f instanceof n.Matrix2D?f:new n.Matrix2D(f)},clone:function(f){var c=new n.Matrix2D,s;for(s in f)"number"==typeof f[s]&&("number"==typeof c[s]&&c[s]!=f[s])&&(c[s]=f[s]);return c},invert:function(f){var f=n.normalize(f),c=f.xx*f.yy-f.xy*f.yx;return f=new n.Matrix2D({xx:f.yy/c,xy:-f.xy/c,yx:-f.yx/c,yy:f.xx/c,dx:(f.xy*f.dy-f.yy*f.dx)/c,dy:(f.yx*f.dx-f.xx*f.dy)/c})},_multiplyPoint:function(f,c,n){return{x:f.xx*c+f.xy*
n+f.dx,y:f.yx*c+f.yy*n+f.dy}},multiplyPoint:function(f,c,s){f=n.normalize(f);return"number"==typeof c&&"number"==typeof s?n._multiplyPoint(f,c,s):n._multiplyPoint(f,c.x,c.y)},multiply:function(f){for(var c=n.normalize(f),s=1;s<arguments.length;++s){var l=c,o=n.normalize(arguments[s]),c=new n.Matrix2D;c.xx=l.xx*o.xx+l.xy*o.yx;c.xy=l.xx*o.xy+l.xy*o.yy;c.yx=l.yx*o.xx+l.yy*o.yx;c.yy=l.yx*o.xy+l.yy*o.yy;c.dx=l.xx*o.dx+l.xy*o.dy+l.dx;c.dy=l.yx*o.dx+l.yy*o.dy+l.dy}return c},_sandwich:function(f,c,s){return n.multiply(n.translate(c,
s),f,n.translate(-c,-s))},scaleAt:function(f,c,s,l){switch(arguments.length){case 4:return n._sandwich(n.scale(f,c),s,l);case 3:return"number"==typeof s?n._sandwich(n.scale(f),c,s):n._sandwich(n.scale(f,c),s.x,s.y)}return n._sandwich(n.scale(f),c.x,c.y)},rotateAt:function(f,c,s){return 2<arguments.length?n._sandwich(n.rotate(f),c,s):n._sandwich(n.rotate(f),c.x,c.y)},rotategAt:function(f,c,s){return 2<arguments.length?n._sandwich(n.rotateg(f),c,s):n._sandwich(n.rotateg(f),c.x,c.y)},skewXAt:function(f,
c,s){return 2<arguments.length?n._sandwich(n.skewX(f),c,s):n._sandwich(n.skewX(f),c.x,c.y)},skewXgAt:function(f,c,s){return 2<arguments.length?n._sandwich(n.skewXg(f),c,s):n._sandwich(n.skewXg(f),c.x,c.y)},skewYAt:function(f,c,s){return 2<arguments.length?n._sandwich(n.skewY(f),c,s):n._sandwich(n.skewY(f),c.x,c.y)},skewYgAt:function(f,c,s){return 2<arguments.length?n._sandwich(n.skewYg(f),c,s):n._sandwich(n.skewYg(f),c.x,c.y)}});f.Matrix2D=n.Matrix2D;return n})},"dojox/gfx/Moveable":function(){define("dojox/gfx/Moveable",
"dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/connect dojo/dom-class dojo/_base/window ./Mover".split(" "),function(f,u,n,t,w,c,s,l){return u("dojox.gfx.Moveable",null,{constructor:function(c,f){this.shape=c;this.delay=f&&f.delay>0?f.delay:0;this.mover=f&&f.mover?f.mover:l;this.events=[this.shape.connect("onmousedown",this,"onMouseDown")]},destroy:function(){n.forEach(this.events,this.shape.disconnect,this.shape);this.events=this.shape=null},onMouseDown:function(c){if(this.delay){this.events.push(this.shape.connect("onmousemove",
this,"onMouseMove"),this.shape.connect("onmouseup",this,"onMouseUp"));this._lastX=c.clientX;this._lastY=c.clientY}else new this.mover(this.shape,c,this);t.stop(c)},onMouseMove:function(c){if(Math.abs(c.clientX-this._lastX)>this.delay||Math.abs(c.clientY-this._lastY)>this.delay){this.onMouseUp(c);new this.mover(this.shape,c,this)}t.stop(c)},onMouseUp:function(){this.shape.disconnect(this.events.pop());this.shape.disconnect(this.events.pop())},onMoveStart:function(f){w.publish("/gfx/move/start",[f]);
c.add(s.body(),"dojoMove")},onMoveStop:function(f){w.publish("/gfx/move/stop",[f]);c.remove(s.body(),"dojoMove")},onFirstMove:function(){},onMove:function(c,f){this.onMoving(c,f);this.shape.applyLeftTransform(f);this.onMoved(c,f)},onMoving:function(){},onMoved:function(){}})})},"dojox/gfx/_base":function(){define("dojox/gfx/_base","dojo/_base/lang dojo/_base/html dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(f,
u,n,t,w,c,s,l,o){var k=f.getObject("dojox.gfx",true),m=k._base={};k._hasClass=function(a,b){var i=a.getAttribute("className");return i&&(" "+i+" ").indexOf(" "+b+" ")>=0};k._addClass=function(a,b){var i=a.getAttribute("className")||"";if(!i||(" "+i+" ").indexOf(" "+b+" ")<0)a.setAttribute("className",i+(i?" ":"")+b)};k._removeClass=function(a,b){var i=a.getAttribute("className");i&&a.setAttribute("className",i.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};m._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;if(t("ie"))w.doc.documentElement.style.fontSize="100%";var i=l.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},w.body());for(b in a){i.style.fontSize=b;a[b]=Math.round(i.offsetHeight*12/16)*16/12/1E3}w.body().removeChild(i);return a};var q=null;m._getCachedFontMeasurements=
function(a){if(a||!q)q=m._getFontMeasurements();return q};var a=null,i={};m._getTextBox=function(g,b,c){var f,m,k=arguments.length,n;a||(a=l.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},w.body()));f=a;f.className="";m=f.style;m.borderWidth="0";m.margin="0";m.padding="0";m.outline="0";if(k>1&&b)for(n in b)n in i||(m[n]=b[n]);if(k>2&&c)f.className=c;f.innerHTML=g;if(f.getBoundingClientRect){f=f.getBoundingClientRect();return{l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||
f.bottom-f.top}}return o.getMarginBox(f)};var y=0;m._getUniqueId=function(){var a;do a=dojo._scopeName+"xUnique"+ ++y;while(s.byId(a));return a};f.mixin(k,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},
defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,
color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var i=a[b];if(i)return new i;i=a[b]=new Function;i.prototype=k["default"+b];return new i}}(),normalizeColor:function(a){return a instanceof n?a:new n(a)},normalizeParameters:function(a,b){var i;if(b){var c={};for(i in a)i in b&&!(i in c)&&(a[i]=b[i])}return a},makeParameters:function(a,
b){var i=null;if(!b)return f.delegate(a);var c={};for(i in a)i in c||(c[i]=f.clone(i in b?b[i]:a[i]));return c},formatNumber:function(a,b){var i=a.toString();if(i.indexOf("e")>=0)i=a.toFixed(4);else{var c=i.indexOf(".");c>=0&&i.length-c>5&&(i=a.toFixed(4))}return a<0?i:b?" "+i:i},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=k.getDefault("Font"),a=a.split(/\s+/);if(!(a.length<5)){b.style=a[0];b.variant=a[1];b.weight=
a[2];var i=a[3].indexOf("/");b.size=i<0?a[3]:a[3].substring(0,i);var c=4;i<0&&(a[4]=="/"?c=6:a[4].charAt(0)=="/"&&(c=5));if(c<a.length)b.family=a.slice(c).join(" ")}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return k._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*k.px_in_pt()},px2pt:function(a){return a/k.px_in_pt()},normalizedLength:function(a){if(a.length===0)return 0;if(a.length>2){var b=k.px_in_pt(),i=parseFloat(a);switch(a.slice(-2)){case "px":return i;
case "pt":return i*b;case "in":return i*72*b;case "pc":return i*12*b;case "mm":return i*k.mm_in_pt*b;case "cm":return i*k.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b=typeof a=="string"?k[a]:a;b&&c.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath",
"Surface","createSurface","fixTarget"],function(a){k[a]=b[a]})}});return k})},"dojox/gfx/gradutils":function(){define("dojox/gfx/gradutils",["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(f,u,n,t){function w(c,f){if(0>=c)return f[0].color;var l=f.length;if(1<=c)return f[l-1].color;for(var n=0;n<l;++n){var k=f[n];if(k.offset>=c)return n?(l=f[n-1],t.blendColors(new t(l.color),new t(k.color),(c-l.offset)/(k.offset-l.offset))):k.color}return f[l-1].color}f=f.gradutils={};f.getColor=
function(c,f){var l;if(c){switch(c.type){case "linear":l=Math.atan2(c.y2-c.y1,c.x2-c.x1);l=n.rotate(-l);var o=n.project(c.x2-c.x1,c.y2-c.y1),k=n.multiplyPoint(o,f),m=n.multiplyPoint(o,c.x1,c.y1),o=n.multiplyPoint(o,c.x2,c.y2),o=n.multiplyPoint(l,o.x-m.x,o.y-m.y).x;l=n.multiplyPoint(l,k.x-m.x,k.y-m.y).x/o;break;case "radial":l=f.x-c.cx,k=f.y-c.cy,l=Math.sqrt(l*l+k*k)/c.r}return w(l,c.colors)}return new t(c||[0,0,0,0])};f.reverse=function(c){if(c)switch(c.type){case "linear":case "radial":if(c=u.delegate(c),
c.colors){for(var f=c.colors,l=f.length,n=0,k,m=c.colors=Array(f.length);n<l;++n)k=f[n],m[n]={offset:1-k.offset,color:k.color};m.sort(function(c,a){return c.offset-a.offset})}}return c};return f})},"dojox/gfx/renderer":function(){define("dojox/gfx/renderer",["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(f,u,n,t,w){var c=null;return{load:function(s,l,o){function k(){l(["dojox/gfx/"+m],function(a){f.renderer=m;c=a;o(a)})}if(c&&"force"!=s)o(c);else{for(var m=
w.forceGfxRenderer,s=!m&&(u.isString(w.gfxRenderer)?w.gfxRenderer:"svg,vml,canvas,silverlight").split(","),q,a;!m&&s.length;)switch(s.shift()){case "svg":"SVGAngle"in t.global&&(m="svg");break;case "vml":n("ie")&&(m="vml");break;case "silverlight":try{n("ie")?(q=new ActiveXObject("AgControl.AgControl"))&&q.IsVersionSupported("1.0")&&(a=!0):navigator.plugins["Silverlight Plug-In"]&&(a=!0)}catch(i){a=!1}finally{q=null}a&&(m="silverlight");break;case "canvas":t.global.CanvasRenderingContext2D&&(m="canvas")}"canvas"===
m&&!1!==w.canvasEvents&&(m="canvasWithEvents");w.isDebug&&console.log("gfx renderer = "+m);"svg"==m&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(k):k()}}}})},"dojox/gfx/shape":function(){define("dojox/gfx/shape","./_base dojo/_base/lang dojo/_base/declare dojo/_base/window dojo/_base/sniff dojo/_base/connect dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(f,u,n,t,w,c,s,l,o,k){var m=f.shape={},q={},a={};m.register=function(i){var c=i.declaredClass.split(".").pop(),
g=c in q?++q[c]:q[c]=0,c=c+g;a[c]=i;return c};m.byId=function(i){return a[i]};m.dispose=function(i){delete a[i.getUID()]};n("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;var a=m.register(this);this.getUID=function(){return a}},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},
getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var c=this._getRealMatrix();return[k.multiplyPoint(c,a.x,a.y),k.multiplyPoint(c,a.x+a.width,a.y),k.multiplyPoint(c,a.x+a.width,a.y+a.height),k.multiplyPoint(c,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setShape:function(a){this.shape=f.makeParameters(this.shape,a);
this.bbox=null;return this},setFill:function(a){if(!a){this.fillStyle=null;return this}var c=null;if(typeof a=="object"&&"type"in a)switch(a.type){case "linear":c=f.makeParameters(f.defaultLinearGradient,a);break;case "radial":c=f.makeParameters(f.defaultRadialGradient,a);break;case "pattern":c=f.makeParameters(f.defaultPattern,a)}else c=f.normalizeColor(a);this.fillStyle=c;return this},setStroke:function(a){if(!a){this.strokeStyle=null;return this}if(typeof a=="string"||u.isArray(a)||a instanceof
o)a={color:a};a=this.strokeStyle=f.makeParameters(f.defaultStroke,a);a.color=f.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=k.clone(a?k.normalize(a):k.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();if(a){a._moveChildToFront(this);this._moveToFront()}return this},moveToBack:function(){var a=this.getParent();if(a){a._moveChildToBack(this);this._moveToBack()}return this},_moveToFront:function(){},
_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,c){this.parent=a;return this._updateParentMatrix(c)},_updateParentMatrix:function(a){this.parentMatrix=a?k.clone(a):null;return this._applyTransform()},
_getRealMatrix:function(){for(var a=this.matrix,c=this.parent;c;){c.matrix&&(a=k.multiply(c.matrix,a));c=c.parent}return a}});m._eventsProcessing={connect:function(a,k,g){return c.connect(this.getEventSource(),a,m.fixCallback(this,f.fixTarget,k,g))},disconnect:function(a){c.disconnect(a)}};m.fixCallback=function(a,c,g,b){if(!b){b=g;g=null}if(u.isString(b)){g=g||t.global;if(!g[b])throw['dojox.gfx.shape.fixCallback: scope["',b,'"] is null (scope="',g,'")'].join("");return function(f){return c(f,a)?
g[b].apply(g,arguments||[]):void 0}}return!g?function(f){return c(f,a)?b.apply(g,arguments):void 0}:function(f){return c(f,a)?b.apply(g,arguments||[]):void 0}};u.extend(m.Shape,m._eventsProcessing);m.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(a){var c=a.getParent();c&&c.remove(a,true);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,c){for(var g=0;g<this.children.length;++g)if(this.children[g]==
a){if(!c){a.parent=null;a.parentMatrix=null}this.children.splice(g,1);break}return this},clear:function(){for(var a,c=0;c<this.children.length;++c){a=this.children[c];a.parent=null;a.parentMatrix=null}this.children=[];return this},_moveChildToFront:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,
1);this.children.unshift(a);break}return this}};n("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){s.forEach(this._nodes,l.destroy);this._nodes=[];s.forEach(this._events,c.disconnect);this._events=[];this.rawNode=null;if(w("ie"))for(;this._parent.lastChild;)l.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:true,onLoad:function(){},whenLoaded:function(a,f){var g=u.hitch(a,f);if(this.isLoaded)g(this);else var b=c.connect(this,"onLoad",function(a){c.disconnect(b);g(a)})}});u.extend(m.Surface,m._eventsProcessing);n("dojox.gfx.Point",null,{});n("dojox.gfx.Rectangle",null,{});n("dojox.gfx.shape.Rect",m.Shape,{constructor:function(a){this.shape=f.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});n("dojox.gfx.shape.Ellipse",m.Shape,{constructor:function(a){this.shape=
f.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});n("dojox.gfx.shape.Circle",m.Shape,{constructor:function(a){this.shape=f.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});n("dojox.gfx.shape.Line",m.Shape,{constructor:function(a){this.shape=f.getDefault("Line");
this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});n("dojox.gfx.shape.Polyline",m.Shape,{constructor:function(a){this.shape=f.getDefault("Polyline");this.rawNode=a},setShape:function(a,c){if(a&&a instanceof Array){this.inherited(arguments,[{points:a}]);c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])}else this.inherited(arguments,
[a]);return this},_normalizePoints:function(){var a=this.shape.points,c=a&&a.length;if(c&&typeof a[0]=="number"){for(var g=[],b=0;b<c;b=b+2)g.push({x:a[b],y:a[b+1]});this.shape.points=g}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,c=a.length,g=a[0],b=g.x,f=g.y,m=g.x,k=g.y,l=1;l<c;++l){g=a[l];if(b>g.x)b=g.x;if(m<g.x)m=g.x;if(f>g.y)f=g.y;if(k<g.y)k=g.y}this.bbox={x:b,y:f,width:m-b,height:k-f}}return this.bbox}});n("dojox.gfx.shape.Image",m.Shape,{constructor:function(a){this.shape=
f.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});n("dojox.gfx.shape.Text",m.Shape,{constructor:function(a){this.fontStyle=null;this.shape=f.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle=typeof a=="string"?f.splitFontString(a):f.makeParameters(f.defaultFont,a);this._setFont();return this}});m.Creator={createShape:function(a){switch(a.type){case f.defaultPath.type:return this.createPath(a);
case f.defaultRect.type:return this.createRect(a);case f.defaultCircle.type:return this.createCircle(a);case f.defaultEllipse.type:return this.createEllipse(a);case f.defaultLine.type:return this.createLine(a);case f.defaultPolyline.type:return this.createPolyline(a);case f.defaultImage.type:return this.createImage(a);case f.defaultText.type:return this.createText(a);case f.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(f.Group)},createRect:function(a){return this.createObject(f.Rect,
a)},createEllipse:function(a){return this.createObject(f.Ellipse,a)},createCircle:function(a){return this.createObject(f.Circle,a)},createLine:function(a){return this.createObject(f.Line,a)},createPolyline:function(a){return this.createObject(f.Polyline,a)},createImage:function(a){return this.createObject(f.Image,a)},createText:function(a){return this.createObject(f.Text,a)},createPath:function(a){return this.createObject(f.Path,a)},createTextPath:function(a){return this.createObject(f.TextPath,{}).setText(a)},
createObject:function(){return null}};return m})},"dojox/gfx/VectorText":function(){define("dojox/gfx/VectorText","dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/loader dojo/_base/xhr ./_base dojox/xml/DomParser dojox/html/metrics ./matrix".split(" "),function(f,u,n,t,w,c,s,l,o){var k=function(c){var f;w.get({url:c,sync:true,load:function(a){f=a}});return f};f.getObject("dojox.gfx.VectorText",true);f.mixin(c,{vectorFontFitting:{NONE:0,FLOW:1,FIT:2},defaultVectorText:{type:"vectortext",
x:0,y:0,width:null,height:null,text:"",align:"start",decoration:"none",fitting:0,leading:1.5},defaultVectorFont:{type:"vectorfont",size:"10pt",family:null},_vectorFontCache:{},_svgFontCache:{},getVectorFont:function(f){return c._vectorFontCache[f]?c._vectorFontCache[f]:new c.VectorFont(f)}});return u("dojox.gfx.VectorFont",null,{_entityRe:/&(quot|apos|lt|gt|amp|#x[^;]+|#\d+);/g,_decodeEntitySequence:function(c){if(c.match(this._entityRe)){for(var f={amp:"&",apos:"'",quot:'"',lt:"<",gt:">"},a,i="";(a=
this._entityRe.exec(c))!==null;)i=a[1].charAt(1)=="x"?i+String.fromCharCode(parseInt(a[1].slice(2),16)):isNaN(parseInt(a[1].slice(1),10))?i+(f[a[1]]||""):i+String.fromCharCode(parseInt(a[1].slice(1),10));return i}},_parse:function(m,k){var a=c._svgFontCache[k]||s.parse(m),i=a.documentElement.byName("font")[0],l=a.documentElement.byName("font-face")[0],g=parseFloat(l.getAttribute("units-per-em")||1E3,10),b={x:parseFloat(i.getAttribute("horiz-adv-x"),10),y:parseFloat(i.getAttribute("vert-adv-y")||0,
10)};if(!b.y)b.y=g;var i={horiz:{x:parseFloat(i.getAttribute("horiz-origin-x")||0,10),y:parseFloat(i.getAttribute("horiz-origin-y")||0,10)},vert:{x:parseFloat(i.getAttribute("vert-origin-x")||0,10),y:parseFloat(i.getAttribute("vert-origin-y")||0,10)}},o=l.getAttribute("font-family"),t=l.getAttribute("font-style")||"all",u=l.getAttribute("font-variant")||"normal",w=l.getAttribute("font-weight")||"all",C=l.getAttribute("font-stretch")||"normal",J=l.getAttribute("unicode-range")||"U+0-10FFFF";l.getAttribute("panose-1");
l.getAttribute("cap-height");var Z=parseFloat(l.getAttribute("ascent")||g-i.vert.y,10),$=parseFloat(l.getAttribute("descent")||i.vert.y,10),O={},K=o;l.byName("font-face-name")[0]&&(K=l.byName("font-face-name")[0].getAttribute("name"));if(!c._vectorFontCache[K]){n.forEach(["alphabetic","ideographic","mathematical","hanging"],function(a){var b=l.getAttribute(a);b!==null&&(O[a]=parseFloat(b,10))});var P=parseFloat(a.documentElement.byName("missing-glyph")[0].getAttribute("horiz-adv-x")||b.x,10),N={},
X={},Y=a.documentElement.byName("glyph");n.forEach(Y,function(a){var c=a.getAttribute("unicode"),g=a.getAttribute("glyph-name"),f=parseFloat(a.getAttribute("horiz-adv-x")||b.x,10),a=a.getAttribute("d");c.match(this._entityRe)&&(c=this._decodeEntitySequence(c));f={code:c,name:g,xAdvance:f,path:a};N[c]=f;X[g]=f},this);Y=a.documentElement.byName("hkern");n.forEach(Y,function(a){var b=-parseInt(a.getAttribute("k"),10),c=a.getAttribute("u1"),f=a.getAttribute("g1"),g=a.getAttribute("u2"),a=a.getAttribute("g2"),
i;if(c){c=this._decodeEntitySequence(c);N[c]&&(i=N[c])}else X[f]&&(i=X[f]);if(i){if(!i.kern)i.kern={};if(g){g=this._decodeEntitySequence(g);i.kern[g]={x:b}}else X[a]&&(i.kern[X[a].code]={x:b})}},this);f.mixin(this,{family:o,name:K,style:t,variant:u,weight:w,stretch:C,range:J,viewbox:{width:g,height:g},origin:i,advance:f.mixin(b,{missing:{x:P,y:P}}),ascent:Z,descent:$,baseline:O,glyphs:N});c._vectorFontCache[K]=this;c._vectorFontCache[k]=this;K!=o&&!c._vectorFontCache[o]&&(c._vectorFontCache[o]=this);
c._svgFontCache[k]||(c._svgFontCache[k]=a)}},_clean:function(){var f=this.name,k=this.family;n.forEach(["family","name","style","variant","weight","stretch","range","viewbox","origin","advance","ascent","descent","baseline","glyphs"],function(a){try{delete this[a]}catch(c){}},this);c._vectorFontCache[f]&&delete c._vectorFontCache[f];c._vectorFontCache[k]&&delete c._vectorFontCache[k];return this},constructor:function(c){this._defaultLeading=1.5;c!==void 0&&this.load(c)},load:function(f){this.onLoadBegin(f.toString());
this._parse(c._svgFontCache[f.toString()]||k(f.toString()),f.toString());this.onLoad(this);return this},initialized:function(){return this.glyphs!==null},_round:function(c){return Math.round(1E3*c)/1E3},_leading:function(c){return this.viewbox.height*(c||this._defaultLeading)},_normalize:function(c){return c.replace(/\s+/g,String.fromCharCode(32))},_getWidth:function(c){var f=0,a=0,i=null;n.forEach(c,function(k,g){a=k.xAdvance;c[g]&&(k.kern&&k.kern[c[g].code])&&(a=a+k.kern[c[g].code].x);f=f+a;i=k});
i&&i.code==" "&&(f=f-i.xAdvance);return this._round(f)},_getLongestLine:function(c){var f=0,a=0;n.forEach(c,function(c,k){var g=Math.max(f,this._getWidth(c));if(g>f){f=g;a=k}},this);return{width:f,index:a,line:c[a]}},_trim:function(c){var k=function(a){if(a.length){a[a.length-1].code==" "&&a.splice(a.length-1,1);a.length&&a[0].code==" "&&a.splice(0,1)}};f.isArray(c[0])?n.forEach(c,k):k(c);return c},_split:function(c,f){for(var a=this._getWidth(c),a=Math.floor(a/f),i=[],k=0,g=[],b=false,l=0,n=c.length;l<
n;l++){c[l].code==" "&&(b=true);k=k+c[l].xAdvance;l+1<n&&(c[l].kern&&c[l].kern[c[l+1].code])&&(k=k+c[l].kern[c[l+1].code].x);if(k>=a){for(k=c[l];b&&k.code!=" "&&l>=0;){k=g.pop();l--}i.push(g);g=[];k=0;b=false}g.push(c[l])}g.length&&i.push(g);return this._trim(i)},_getSizeFactor:function(c){var c=c+"",f=l.getCachedFontMeasurements(),a=this.viewbox.height,i=f["1em"],i=parseFloat(c,10);if(c.indexOf("em")>-1)return this._round(f["1em"]*i/a);if(c.indexOf("ex")>-1)return this._round(f["1ex"]*i/a);if(c.indexOf("pt")>
-1)return this._round(f["12pt"]/12*i/a);if(c.indexOf("px")>-1)return this._round(f["16px"]/16*i/a);if(c.indexOf("%")>-1)return this._round(f["1em"]*(i/100)/a);i=f[c]||f.medium;return this._round(i/a)},_getFitFactor:function(c,f,a,i){if(a){var k=this._getLongestLine(c).width;return this._round(Math.min(f/k,a/(c.length*this.viewbox.height*i-(this.viewbox.height*i-this.viewbox.height))))}return this._round(f/this._getWidth(c))},_getBestFit:function(c,f,a,i){for(var k=32,g=0,b=k;k>0;){var l=this._getFitFactor(this._split(c,
k),f,a,i);if(l>g){g=l;b=k}k--}return{scale:g,lines:this._split(c,b)}},_getBestFlow:function(c,f,a){for(var i=[],k=0,g=[],b=false,l=0,n=c.length;l<n;l++){c[l].code==" "&&(b=true);var o=c[l].xAdvance;l+1<n&&(c[l].kern&&c[l].kern[c[l+1].code])&&(o=o+c[l].kern[c[l+1].code].x);k=k+a*o;if(k>=f){for(k=c[l];b&&k.code!=" "&&l>=0;){k=g.pop();l--}i.push(g);g=[];k=0;b=false}g.push(c[l])}g.length&&i.push(g);return this._trim(i)},getWidth:function(c,f){return this._getWidth(n.map(this._normalize(c).split(""),function(a){return this.glyphs[a]||
{xAdvance:this.advance.missing.x}},this))*(f||1)},getLineHeight:function(c){return this.viewbox.height*(c||1)},getCenterline:function(c){return(c||1)*(this.viewbox.height/2)},getBaseline:function(c){return(c||1)*(this.viewbox.height+this.descent)},draw:function(f,k,a,i,l){if(!this.initialized())throw Error("dojox.gfx.VectorFont.draw(): we have not been initialized yet.");var g=f.createGroup();if(k.x||k.y)f.applyTransform({dx:k.x||0,dy:k.y||0});var b=n.map(this._normalize(k.text).split(""),function(a){return this.glyphs[a]||
{path:null,xAdvance:this.advance.missing.x}},this),f=a.size,s=k.fitting,t=k.width,u=k.height,a=k.align,k=k.leading||this._defaultLeading;if(s&&(s==c.vectorFontFitting.FLOW&&!t||s==c.vectorFontFitting.FIT&&(!t||!u)))s=c.vectorFontFitting.NONE;switch(s){case c.vectorFontFitting.FIT:b=this._getBestFit(b,t,u,k);f=b.scale;b=b.lines;break;case c.vectorFontFitting.FLOW:f=this._getSizeFactor(f);b=this._getBestFlow(b,t,f);break;default:f=this._getSizeFactor(f);b=[b]}for(var b=n.filter(b,function(a){return a.length>
0}),t=0,s=this._getLongestLine(b).width,u=0,w=b.length;u<w;u++){for(var C=0,J=b[u],Z=this._getWidth(J),$=g.createGroup(),O=0;O<J.length;O++){var K=J[O];if(K.path!==null){var P=$.createPath(K.path).setFill(i);l&&P.setStroke(l);P.setTransform([o.flipY,o.translate(C,-this.viewbox.height-this.descent)])}C=C+K.xAdvance;O+1<J.length&&(K.kern&&K.kern[J[O+1].code])&&(C=C+K.kern[J[O+1].code].x)}C=0;a=="middle"?C=s/2-Z/2:a=="end"&&(C=s-Z);$.setTransform({dx:C,dy:t});t=t+this.viewbox.height*k}g.setTransform(o.scale(f));
return g},onLoadBegin:function(){},onLoad:function(){}})})}}});require(["dojo/i18n"],function(f){f._preloadLocalizations("dojo/nls/graphics-layer",[])});define("dojo/graphics-layer",[],1);